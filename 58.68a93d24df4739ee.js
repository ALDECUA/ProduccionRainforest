"use strict";(self.webpackChunkproyectoprueba=self.webpackChunkproyectoprueba||[]).push([[58],{58:(ze,q,f)=>{f.r(q),f.d(q,{UsuariosModule:()=>we});var M=f(9808),U=f(780),J=f(2654),P=f(5226),O=f.n(P),e=f(9863),N=f(6475),Y=f(7556),X=f(4383),v=f(4182);function H(o,s,t,i){return new(t||(t=Promise))(function(a,r){function c(d){try{h(i.next(d))}catch(p){r(p)}}function l(d){try{h(i.throw(d))}catch(p){r(p)}}function h(d){d.done?a(d.value):function(a){return a instanceof t?a:new t(function(r){r(a)})}(d.value).then(c,l)}h((i=i.apply(o,s||[])).next())})}var G=f(2313);const K=["wrapper"],$=["sourceImage"];function ee(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"img",4,5),e.NdJ("load",function(){return e.CHM(t),e.oxw().imageLoadedInView()}),e.qZA()}if(2&o){const t=e.oxw();e.Udp("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),e.Q6J("src",t.safeImgDataUrl,e.LSH)}}function te(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",9),e.NdJ("mousedown",function(n){e.CHM(t);const a=e.oxw(2);return a.startMove(n,a.moveTypes.Resize,"topleft")})("touchstart",function(n){e.CHM(t);const a=e.oxw(2);return a.startMove(n,a.moveTypes.Resize,"topleft")}),e._UZ(2,"span",10),e.qZA(),e.TgZ(3,"span",11),e._UZ(4,"span",10),e.qZA(),e.TgZ(5,"span",12),e.NdJ("mousedown",function(n){e.CHM(t);const a=e.oxw(2);return a.startMove(n,a.moveTypes.Resize,"topright")})("touchstart",function(n){e.CHM(t);const a=e.oxw(2);return a.startMove(n,a.moveTypes.Resize,"topright")}),e._UZ(6,"span",10),e.qZA(),e.TgZ(7,"span",13),e._UZ(8,"span",10),e.qZA(),e.TgZ(9,"span",14),e.NdJ("mousedown",function(n){e.CHM(t);const a=e.oxw(2);return a.startMove(n,a.moveTypes.Resize,"bottomright")})("touchstart",function(n){e.CHM(t);const a=e.oxw(2);return a.startMove(n,a.moveTypes.Resize,"bottomright")}),e._UZ(10,"span",10),e.qZA(),e.TgZ(11,"span",15),e._UZ(12,"span",10),e.qZA(),e.TgZ(13,"span",16),e.NdJ("mousedown",function(n){e.CHM(t);const a=e.oxw(2);return a.startMove(n,a.moveTypes.Resize,"bottomleft")})("touchstart",function(n){e.CHM(t);const a=e.oxw(2);return a.startMove(n,a.moveTypes.Resize,"bottomleft")}),e._UZ(14,"span",10),e.qZA(),e.TgZ(15,"span",17),e._UZ(16,"span",10),e.qZA(),e.TgZ(17,"span",18),e.NdJ("mousedown",function(n){e.CHM(t);const a=e.oxw(2);return a.startMove(n,a.moveTypes.Resize,"top")})("touchstart",function(n){e.CHM(t);const a=e.oxw(2);return a.startMove(n,a.moveTypes.Resize,"top")}),e.qZA(),e.TgZ(18,"span",19),e.NdJ("mousedown",function(n){e.CHM(t);const a=e.oxw(2);return a.startMove(n,a.moveTypes.Resize,"right")})("touchstart",function(n){e.CHM(t);const a=e.oxw(2);return a.startMove(n,a.moveTypes.Resize,"right")}),e.qZA(),e.TgZ(19,"span",20),e.NdJ("mousedown",function(n){e.CHM(t);const a=e.oxw(2);return a.startMove(n,a.moveTypes.Resize,"bottom")})("touchstart",function(n){e.CHM(t);const a=e.oxw(2);return a.startMove(n,a.moveTypes.Resize,"bottom")}),e.qZA(),e.TgZ(20,"span",21),e.NdJ("mousedown",function(n){e.CHM(t);const a=e.oxw(2);return a.startMove(n,a.moveTypes.Resize,"left")})("touchstart",function(n){e.CHM(t);const a=e.oxw(2);return a.startMove(n,a.moveTypes.Resize,"left")}),e.qZA(),e.BQk()}}function ie(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("keydown",function(n){return e.CHM(t),e.oxw().keyboardAccess(n)}),e.TgZ(1,"div",7),e.NdJ("mousedown",function(n){e.CHM(t);const a=e.oxw();return a.startMove(n,a.moveTypes.Move)})("touchstart",function(n){e.CHM(t);const a=e.oxw();return a.startMove(n,a.moveTypes.Move)}),e.qZA(),e.YNc(2,te,21,0,"ng-container",8),e.qZA()}if(2&o){const t=e.oxw();e.Udp("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),e.ekj("rounded",t.roundCropper),e.xp6(2),e.Q6J("ngIf",!t.hideResizeSquares)}}const x={Move:"move",Resize:"resize",Pinch:"pinch"};let ne=(()=>{class o{crop(t,i,n,a){const r=this.getImagePosition(t,i,n,a),c=r.x2-r.x1,l=r.y2-r.y1,h=document.createElement("canvas");h.width=c,h.height=l;const d=h.getContext("2d");if(!d)return;null!=a.backgroundColor&&(d.fillStyle=a.backgroundColor,d.fillRect(0,0,c,l));const p=(a.transform.scale||1)*(a.transform.flipH?-1:1),g=(a.transform.scale||1)*(a.transform.flipV?-1:1),u=i.transformed;d.setTransform(p,0,0,g,u.size.width/2,u.size.height/2),d.translate(-r.x1/p,-r.y1/g),d.rotate((a.transform.rotate||0)*Math.PI/180),d.drawImage(u.image,-u.size.width/2,-u.size.height/2);const m={width:c,height:l,imagePosition:r,cropperPosition:Object.assign({},n)};a.containWithinAspectRatio&&(m.offsetImagePosition=this.getOffsetImagePosition(t,i,n,a));const _=this.getResizeRatio(c,l,a);return 1!==_&&(m.width=Math.round(c*_),m.height=a.maintainAspectRatio?Math.round(m.width/a.aspectRatio):Math.round(l*_),function(o,s,t){const i=o.width,n=o.height,a=i/(s=Math.round(s)),r=n/(t=Math.round(t)),c=Math.ceil(a/2),l=Math.ceil(r/2),h=o.getContext("2d");if(h){const d=h.getImageData(0,0,i,n),p=h.createImageData(s,t),g=d.data,u=p.data;for(let m=0;m<t;m++)for(let _=0;_<s;_++){const w=4*(_+m*s),Ze=m*r;let A=0,Z=0,k=0,B=0,F=0,Q=0,D=0;const Te=Math.floor(_*a),Ie=Math.floor(m*r);let R=Math.ceil((_+1)*a),z=Math.ceil((m+1)*r);R=Math.min(R,i),z=Math.min(z,n);for(let T=Ie;T<z;T++){const L=Math.abs(Ze-T)/l,Se=_*a,Re=L*L;for(let I=Te;I<R;I++){const j=Math.abs(Se-I)/c,y=Math.sqrt(Re+j*j);if(y>=1)continue;A=2*y*y*y-3*y*y+1;const C=4*(I+T*i);D+=A*g[C+3],k+=A,g[C+3]<255&&(A=A*g[C+3]/250),B+=A*g[C],F+=A*g[C+1],Q+=A*g[C+2],Z+=A}}u[w]=B/Z,u[w+1]=F/Z,u[w+2]=Q/Z,u[w+3]=D/k}o.width=s,o.height=t,h.putImageData(p,0,0)}}(h,m.width,m.height)),m.base64=h.toDataURL("image/"+a.format,this.getQuality(a)),m}getImagePosition(t,i,n,a){const c=i.transformed.size.width/t.nativeElement.offsetWidth,l={x1:Math.round(n.x1*c),y1:Math.round(n.y1*c),x2:Math.round(n.x2*c),y2:Math.round(n.y2*c)};return a.containWithinAspectRatio||(l.x1=Math.max(l.x1,0),l.y1=Math.max(l.y1,0),l.x2=Math.min(l.x2,i.transformed.size.width),l.y2=Math.min(l.y2,i.transformed.size.height)),l}getOffsetImagePosition(t,i,n,a){const l=i.transformed.size.width/t.nativeElement.offsetWidth;let h,d;(a.canvasRotation+i.exifTransform.rotate)%2?(h=(i.transformed.size.width-i.original.size.height)/2,d=(i.transformed.size.height-i.original.size.width)/2):(h=(i.transformed.size.width-i.original.size.width)/2,d=(i.transformed.size.height-i.original.size.height)/2);const p={x1:Math.round(n.x1*l)-h,y1:Math.round(n.y1*l)-d,x2:Math.round(n.x2*l)-h,y2:Math.round(n.y2*l)-d};return a.containWithinAspectRatio||(p.x1=Math.max(p.x1,0),p.y1=Math.max(p.y1,0),p.x2=Math.min(p.x2,i.transformed.size.width),p.y2=Math.min(p.y2,i.transformed.size.height)),p}getResizeRatio(t,i,n){const a=n.resizeToWidth/t,r=n.resizeToHeight/i,c=new Array;n.resizeToWidth>0&&c.push(a),n.resizeToHeight>0&&c.push(r);const l=0===c.length?1:Math.min(...c);return l>1&&!n.onlyScaleDown?l:Math.min(l,1)}getQuality(t){return Math.min(1,Math.max(0,t.imageQuality/100))}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=(0,e.Yz7)({factory:function(){return new o},token:o,providedIn:"root"}),o})();class oe{constructor(){this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=void 0,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(s){Object.keys(s).filter(t=>t in this).forEach(t=>this[t]=s[t]),this.validateOptions()}setOptionsFromChanges(s){Object.keys(s).filter(t=>t in this).forEach(t=>this[t]=s[t].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}let de=(()=>{class o{constructor(){this.autoRotateSupported=new Promise(o=>{const s=new Image;s.onload=()=>{o(1===s.width&&2===s.height)},s.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}loadImageFile(t,i){return new Promise((n,a)=>{const r=new FileReader;r.onload=c=>{this.loadImage(c.target.result,t.type,i).then(n).catch(a)},r.readAsDataURL(t)})}loadImage(t,i,n){return this.isValidImageType(i)?this.loadBase64Image(t,n):Promise.reject(new Error("Invalid image type"))}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp)/.test(t)}loadImageFromURL(t,i){return new Promise((n,a)=>{const r=new Image;r.onerror=()=>a,r.onload=()=>{const c=document.createElement("canvas"),l=c.getContext("2d");c.width=r.width,c.height=r.height,l.drawImage(r,0,0),this.loadBase64Image(c.toDataURL(),i).then(n)},r.crossOrigin="anonymous",r.src=t})}loadBase64Image(t,i){return new Promise((n,a)=>{const r=new Image;r.onload=()=>n({originalImage:r,originalBase64:t}),r.onerror=a,r.src=t}).then(n=>this.transformImageBase64(n,i))}transformImageBase64(t,i){return H(this,void 0,void 0,function*(){const n=yield this.autoRotateSupported,a=yield function(o){switch("string"==typeof o&&(o=function(o){const s=new DataView(function(o){o=o.replace(/^data\:([^\;]+)\;base64,/gim,"");const s=atob(o),t=s.length,i=new Uint8Array(t);for(let n=0;n<t;n++)i[n]=s.charCodeAt(n);return i.buffer}(o));if(65496!=s.getUint16(0,!1))return-2;const t=s.byteLength;let i=2;for(;i<t;){if(s.getUint16(i+2,!1)<=8)return-1;const n=s.getUint16(i,!1);if(i+=2,65505==n){if(1165519206!=s.getUint32(i+=2,!1))return-1;const a=18761==s.getUint16(i+=6,!1);i+=s.getUint32(i+4,a);const r=s.getUint16(i,a);i+=2;for(let c=0;c<r;c++)if(274==s.getUint16(i+12*c,a))return s.getUint16(i+12*c+8,a)}else{if(65280!=(65280&n))break;i+=s.getUint16(i,!1)}}return-1}(o)),o){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(n?-1:t.originalBase64);return t.originalImage&&t.originalImage.complete?this.transformLoadedImage({original:{base64:t.originalBase64,image:t.originalImage,size:{width:t.originalImage.naturalWidth,height:t.originalImage.naturalHeight}},exifTransform:a},i):Promise.reject(new Error("No image loaded"))})}transformLoadedImage(t,i){return H(this,void 0,void 0,function*(){const n=i.canvasRotation+t.exifTransform.rotate,a={width:t.original.image.naturalWidth,height:t.original.image.naturalHeight};if(0===n&&!t.exifTransform.flip&&!i.containWithinAspectRatio)return{original:{base64:t.original.base64,image:t.original.image,size:Object.assign({},a)},transformed:{base64:t.original.base64,image:t.original.image,size:Object.assign({},a)},exifTransform:t.exifTransform};const r=this.getTransformedSize(a,t.exifTransform,i),c=document.createElement("canvas");c.width=r.width,c.height=r.height;const l=c.getContext("2d");l.setTransform(t.exifTransform.flip?-1:1,0,0,1,c.width/2,c.height/2),l.rotate(Math.PI*(n/2)),l.drawImage(t.original.image,-a.width/2,-a.height/2);const h=c.toDataURL(),d=yield this.loadImageFromBase64(h);return{original:{base64:t.original.base64,image:t.original.image,size:Object.assign({},a)},transformed:{base64:h,image:d,size:{width:d.width,height:d.height}},exifTransform:t.exifTransform}})}loadImageFromBase64(t){return new Promise((i,n)=>{const a=new Image;a.onload=()=>i(a),a.onerror=n,a.src=t})}getTransformedSize(t,i,n){const a=n.canvasRotation+i.rotate;if(n.containWithinAspectRatio){if(a%2){const c=t.height/n.aspectRatio;return{width:Math.max(t.height,t.width*n.aspectRatio),height:Math.max(t.width,c)}}{const c=t.width/n.aspectRatio;return{width:Math.max(t.width,t.height*n.aspectRatio),height:Math.max(t.height,c)}}}return a%2?{height:t.width,width:t.height}:{width:t.width,height:t.height}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=(0,e.Yz7)({factory:function(){return new o},token:o,providedIn:"root"}),o})(),pe=(()=>{class o{resetCropperPosition(t,i,n){const a=t.nativeElement;if(n.cropperStaticHeight&&n.cropperStaticWidth)i.x1=0,i.x2=a.offsetWidth>n.cropperStaticWidth?n.cropperStaticWidth:a.offsetWidth,i.y1=0,i.y2=a.offsetHeight>n.cropperStaticHeight?n.cropperStaticHeight:a.offsetHeight;else{const r=Math.min(n.cropperScaledMaxWidth,a.offsetWidth),c=Math.min(n.cropperScaledMaxHeight,a.offsetHeight);if(n.maintainAspectRatio)if(r/n.aspectRatio<c){i.x1=0,i.x2=r;const l=r/n.aspectRatio;i.y1=(a.offsetHeight-l)/2,i.y2=i.y1+l}else{i.y1=0,i.y2=c;const l=c*n.aspectRatio;i.x1=(a.offsetWidth-l)/2,i.x2=i.x1+l}else i.x1=0,i.x2=r,i.y1=0,i.y2=c}}move(t,i,n){const a=this.getClientX(t)-i.clientX,r=this.getClientY(t)-i.clientY;n.x1=i.x1+a,n.y1=i.y1+r,n.x2=i.x2+a,n.y2=i.y2+r}resize(t,i,n,a,r){const c=this.getClientX(t)-i.clientX,l=this.getClientY(t)-i.clientY;switch(i.position){case"left":n.x1=Math.min(Math.max(i.x1+c,n.x2-r.cropperScaledMaxWidth),n.x2-r.cropperScaledMinWidth);break;case"topleft":n.x1=Math.min(Math.max(i.x1+c,n.x2-r.cropperScaledMaxWidth),n.x2-r.cropperScaledMinWidth),n.y1=Math.min(Math.max(i.y1+l,n.y2-r.cropperScaledMaxHeight),n.y2-r.cropperScaledMinHeight);break;case"top":n.y1=Math.min(Math.max(i.y1+l,n.y2-r.cropperScaledMaxHeight),n.y2-r.cropperScaledMinHeight);break;case"topright":n.x2=Math.max(Math.min(i.x2+c,n.x1+r.cropperScaledMaxWidth),n.x1+r.cropperScaledMinWidth),n.y1=Math.min(Math.max(i.y1+l,n.y2-r.cropperScaledMaxHeight),n.y2-r.cropperScaledMinHeight);break;case"right":n.x2=Math.max(Math.min(i.x2+c,n.x1+r.cropperScaledMaxWidth),n.x1+r.cropperScaledMinWidth);break;case"bottomright":n.x2=Math.max(Math.min(i.x2+c,n.x1+r.cropperScaledMaxWidth),n.x1+r.cropperScaledMinWidth),n.y2=Math.max(Math.min(i.y2+l,n.y1+r.cropperScaledMaxHeight),n.y1+r.cropperScaledMinHeight);break;case"bottom":n.y2=Math.max(Math.min(i.y2+l,n.y1+r.cropperScaledMaxHeight),n.y1+r.cropperScaledMinHeight);break;case"bottomleft":n.x1=Math.min(Math.max(i.x1+c,n.x2-r.cropperScaledMaxWidth),n.x2-r.cropperScaledMinWidth),n.y2=Math.max(Math.min(i.y2+l,n.y1+r.cropperScaledMaxHeight),n.y1+r.cropperScaledMinHeight);break;case"center":const h=t.scale,d=Math.min(Math.max(r.cropperScaledMinWidth,Math.abs(i.x2-i.x1)*h),r.cropperScaledMaxWidth),p=Math.min(Math.max(r.cropperScaledMinHeight,Math.abs(i.y2-i.y1)*h),r.cropperScaledMaxHeight);n.x1=i.clientX-d/2,n.x2=i.clientX+d/2,n.y1=i.clientY-p/2,n.y2=i.clientY+p/2,n.x1<0?(n.x2-=n.x1,n.x1=0):n.x2>a.width&&(n.x1-=n.x2-a.width,n.x2=a.width),n.y1<0?(n.y2-=n.y1,n.y1=0):n.y2>a.height&&(n.y1-=n.y2-a.height,n.y2=a.height)}r.maintainAspectRatio&&this.checkAspectRatio(i.position,n,a,r)}checkAspectRatio(t,i,n,a){let r=0,c=0;switch(t){case"top":i.x2=i.x1+(i.y2-i.y1)*a.aspectRatio,r=Math.max(i.x2-n.width,0),c=Math.max(0-i.y1,0),(r>0||c>0)&&(i.x2-=c*a.aspectRatio>r?c*a.aspectRatio:r,i.y1+=c*a.aspectRatio>r?c:r/a.aspectRatio);break;case"bottom":i.x2=i.x1+(i.y2-i.y1)*a.aspectRatio,r=Math.max(i.x2-n.width,0),c=Math.max(i.y2-n.height,0),(r>0||c>0)&&(i.x2-=c*a.aspectRatio>r?c*a.aspectRatio:r,i.y2-=c*a.aspectRatio>r?c:r/a.aspectRatio);break;case"topleft":i.y1=i.y2-(i.x2-i.x1)/a.aspectRatio,r=Math.max(0-i.x1,0),c=Math.max(0-i.y1,0),(r>0||c>0)&&(i.x1+=c*a.aspectRatio>r?c*a.aspectRatio:r,i.y1+=c*a.aspectRatio>r?c:r/a.aspectRatio);break;case"topright":i.y1=i.y2-(i.x2-i.x1)/a.aspectRatio,r=Math.max(i.x2-n.width,0),c=Math.max(0-i.y1,0),(r>0||c>0)&&(i.x2-=c*a.aspectRatio>r?c*a.aspectRatio:r,i.y1+=c*a.aspectRatio>r?c:r/a.aspectRatio);break;case"right":case"bottomright":i.y2=i.y1+(i.x2-i.x1)/a.aspectRatio,r=Math.max(i.x2-n.width,0),c=Math.max(i.y2-n.height,0),(r>0||c>0)&&(i.x2-=c*a.aspectRatio>r?c*a.aspectRatio:r,i.y2-=c*a.aspectRatio>r?c:r/a.aspectRatio);break;case"left":case"bottomleft":i.y2=i.y1+(i.x2-i.x1)/a.aspectRatio,r=Math.max(0-i.x1,0),c=Math.max(i.y2-n.height,0),(r>0||c>0)&&(i.x1+=c*a.aspectRatio>r?c*a.aspectRatio:r,i.y2-=c*a.aspectRatio>r?c:r/a.aspectRatio);break;case"center":i.x2=i.x1+(i.y2-i.y1)*a.aspectRatio,i.y2=i.y1+(i.x2-i.x1)/a.aspectRatio;const l=Math.max(0-i.x1,0),h=Math.max(i.x2-n.width,0),d=Math.max(i.y2-n.height,0),p=Math.max(0-i.y1,0);(l>0||h>0||d>0||p>0)&&(i.x1+=d*a.aspectRatio>l?d*a.aspectRatio:l,i.x2-=p*a.aspectRatio>h?p*a.aspectRatio:h,i.y1+=p*a.aspectRatio>h?p:h/a.aspectRatio,i.y2-=d*a.aspectRatio>l?d:l/a.aspectRatio)}}getClientX(t){return(t.touches&&t.touches[0]?t.touches[0].clientX:t.clientX)||0}getClientY(t){return(t.touches&&t.touches[0]?t.touches[0].clientY:t.clientY)||0}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=(0,e.Yz7)({factory:function(){return new o},token:o,providedIn:"root"}),o})(),fe=(()=>{class o{constructor(t,i,n,a,r){this.cropService=t,this.cropperPositionService=i,this.loadImageService=n,this.sanitizer=a,this.cd=r,this.Hammer="undefined"!=typeof window?window.Hammer:null,this.settings=new oe,this.setImageMaxSizeRetries=0,this.marginLeft="0px",this.moveTypes=x,this.imageVisible=!1,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.imageCropped=new e.vpe,this.startCropImage=new e.vpe,this.imageLoaded=new e.vpe,this.cropperReady=new e.vpe,this.loadImageFailed=new e.vpe,this.reset()}ngOnChanges(t){this.onChangesUpdateSettings(t),this.onChangesInputImage(t),this.loadedImage&&this.loadedImage.original.image.complete&&(t.containWithinAspectRatio||t.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i)),(t.cropper||t.maintainAspectRatio||t.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.maintainAspectRatio&&(t.maintainAspectRatio||t.aspectRatio)?this.resetCropperPosition():t.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()),this.cd.markForCheck()),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop())}onChangesUpdateSettings(t){this.settings.setOptionsFromChanges(t),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent&&this.imageChangedEvent.target&&this.imageChangedEvent.target.files&&this.imageChangedEvent.target.files.length>0}setCssTransform(){this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle("scaleX("+(this.transform.scale||1)*(this.transform.flipH?-1:1)+")scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+")rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){this.loadImageService.loadImageFile(t,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.settings).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}setLoadedImage(t){this.loadedImage=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.base64),this.cd.markForCheck()}loadImageError(t){console.error(t),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0}onResize(){!this.loadedImage||(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize())}activatePinchGesture(){if(this.Hammer){const t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else(0,e.X6Q)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const t=this.sourceImage.nativeElement;(this.maxSize.width!==t.offsetWidth||this.maxSize.height!==t.offsetHeight)&&(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){t.key>="1"&&t.key<="9"&&(this.settings.stepSize=+t.key)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const n=t.shiftKey?x.Resize:x.Move,a=t.altKey?function(o){switch(o){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(t.key):function(o){switch(o){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(t.key),r=function(o,s){switch(o){case"ArrowUp":return{clientX:0,clientY:-1*s};case"ArrowRight":return{clientX:s,clientY:0};case"ArrowDown":return{clientX:0,clientY:s};default:return{clientX:-1*s,clientY:0}}}(t.key,this.settings.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},n,a),this.moveImg(r),this.moveStop()}startMove(t,i,n=null){this.moveStart&&this.moveStart.active&&this.moveStart.type===x.Pinch||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:i,position:n,clientX:this.cropperPositionService.getClientX(t),clientY:this.cropperPositionService.getClientY(t)},this.cropper))}startPinch(t){!this.safeImgDataUrl||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:x.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}moveImg(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===x.Move?(this.cropperPositionService.move(t,this.moveStart,this.cropper),this.checkCropperPosition(!0)):this.moveStart.type===x.Resize&&(!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===x.Pinch&&(this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.loadedImage&&this.loadedImage.transformed&&this.loadedImage.transformed.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){if(this.loadedImage&&this.loadedImage.transformed&&this.loadedImage.transformed.image){const t=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/t:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/t:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(){if(this.sourceImage&&this.sourceImage.nativeElement&&null!=this.loadedImage.transformed.image){this.startCropImage.emit();const t=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings);return null!=t&&this.imageCropped.emit(t),t}return null}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ne),e.Y36(pe),e.Y36(de),e.Y36(G.H7),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["image-cropper"]],viewQuery:function(t,i){if(1&t&&(e.Gf(K,7),e.Gf($,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.wrapper=n.first),e.iGM(n=e.CRH())&&(i.sourceImage=n.first)}},hostVars:4,hostBindings:function(t,i){1&t&&e.NdJ("resize",function(){return i.onResize()},!1,e.Jf7)("mousemove",function(a){return i.moveImg(a)},!1,e.evT)("touchmove",function(a){return i.moveImg(a)},!1,e.evT)("mouseup",function(){return i.moveStop()},!1,e.evT)("touchend",function(){return i.moveStop()},!1,e.evT),2&t&&(e.Udp("text-align",i.alignImage),e.ekj("disabled",i.disabled))},inputs:{format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"},features:[e.TTD],decls:5,vars:10,consts:[["wrapper",""],["class","source-image",3,"src","visibility","transform","load",4,"ngIf"],[1,"overlay"],["class","cropper","tabindex","0",3,"rounded","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"source-image",3,"src","load"],["sourceImage",""],["tabindex","0",1,"cropper",3,"keydown"],[1,"move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"resize","topleft",3,"mousedown","touchstart"],[1,"square"],[1,"resize","top"],[1,"resize","topright",3,"mousedown","touchstart"],[1,"resize","right"],[1,"resize","bottomright",3,"mousedown","touchstart"],[1,"resize","bottom"],[1,"resize","bottomleft",3,"mousedown","touchstart"],[1,"resize","left"],[1,"resize-bar","top",3,"mousedown","touchstart"],[1,"resize-bar","right",3,"mousedown","touchstart"],[1,"resize-bar","bottom",3,"mousedown","touchstart"],[1,"resize-bar","left",3,"mousedown","touchstart"]],template:function(t,i){1&t&&(e.TgZ(0,"div",null,0),e.YNc(2,ee,2,5,"img",1),e._UZ(3,"div",2),e.YNc(4,ie,3,15,"div",3),e.qZA()),2&t&&(e.Udp("background",i.imageVisible&&i.backgroundColor),e.xp6(2),e.Q6J("ngIf",i.safeImgDataUrl),e.xp6(1),e.Udp("width",i.maxSize.width,"px")("height",i.maxSize.height,"px")("margin-left","center"===i.alignImage?i.marginLeft:null),e.xp6(1),e.Q6J("ngIf",i.imageVisible))},directives:[M.O5],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color,#fff) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color,rgba(255,255,255,.3)) solid 100vw;touch-action:none}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:focus   .move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3);box-shadow:0 0 0 100vw var(--cropper-outline-color,rgba(255,255,255,.3))}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3);box-shadow:0 0 0 100vh var(--cropper-outline-color,rgba(255,255,255,.3))}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),o})(),_e=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[M.ez]]}),o})();function Ae(o,s){1&o&&(e.TgZ(0,"div",11),e.TgZ(1,"span",12),e._uU(2,"Loading..."),e.qZA(),e.qZA())}let xe=(()=>{class o{constructor(){this.onDefineImage=new e.vpe,this.loading=!1,this.title="ngImageCrop",this.imageChangedEvent="",this.croppedImage=""}ngOnInit(){}fileChangeEvent(t){this.imageChangedEvent=t,console.log(this.imageChangedEvent)}imageCropped(t){this.croppedImage=t.base64}imageLoaded(){}cropperReady(){}loadImageFailed(){}defineImage(){this.onDefineImage.emit(this.croppedImage)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-cropperjs"]],inputs:{loading:"loading"},outputs:{onDefineImage:"onDefineImage"},decls:17,vars:7,consts:[[1,"container"],[1,"mb-3"],["type","file","id","formFileMultiple",1,"form-control",3,"change"],[1,"row",2,"margin-top","15px"],[1,"text-center"],["format","png",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToWidth","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[1,"row"],[1,"text-center","col-md-4"],["width","120px",3,"src"],[1,"btn","btn-primary","btn-sm","mt-1",3,"disabled","click"],["class","spinner-border","role","status","style","width:1rem; height:1rem;",4,"ngIf"],["role","status",1,"spinner-border",2,"width","1rem","height","1rem"],[1,"visually-hidden"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"input",2),e.NdJ("change",function(a){return i.fileChangeEvent(a)}),e.qZA(),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h5"),e._uU(6,"Imagen seleccionada:"),e.qZA(),e.TgZ(7,"image-cropper",5),e.NdJ("imageCropped",function(a){return i.imageCropped(a)})("imageLoaded",function(){return i.imageLoaded()})("cropperReady",function(){return i.cropperReady()})("loadImageFailed",function(){return i.loadImageFailed()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"h5"),e._uU(11,"Vista previa"),e.qZA(),e._UZ(12,"img",8),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"button",9),e.NdJ("click",function(){return i.defineImage()}),e._uU(15,"Recortar y guardar \xa0 "),e.YNc(16,Ae,3,0,"div",10),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Q6J("imageChangedEvent",i.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1)("resizeToWidth",256),e.xp6(5),e.Q6J("src",i.croppedImage,e.LSH),e.xp6(2),e.Q6J("disabled",i.loading),e.xp6(2),e.Q6J("ngIf",i.loading))},directives:[fe,M.O5],styles:[".img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}"]}),o})();const ve=function(o,s){return{sidebar_is_full:o,sidebar_is_small:s}},Me=[{path:"",redirectTo:"perfil",pathMatch:"full"},{path:"perfil",component:(()=>{class o{constructor(t,i,n,a){this.app=t,this.auth=i,this.ngZone=n,this.toast=a,this.userData={},this.subscriptions=new J.w,this.loading=!1,this.modalA=null,this.app.currentModule="Usuario",this.app.currentSection="- Perfil"}ngOnInit(){this.userData=this.auth.user,console.log(this.userData)}ngAfterViewInit(){this.modalA=new bootstrap.Modal(document.getElementById("cropperModal"),{})}ngOnDestroy(){this.subscriptions.unsubscribe()}subirImagen(t){console.log(t),this.loading=!0,fetch(t).then(i=>i.blob()).then(i=>{let n=new FormData;n.append("foto",i,"imagen.png"),n.append("IdUsuario",this.auth.user.IdUsuario),console.log(this.auth.user.IdUsuario),this.subscriptions.add(this.auth.cambiarFoto(n).subscribe(a=>{this.userData.Foto_Perfil=a.Foto+"?"+(new Date).getTime(),console.log(this.userData),this.auth.user.Foto_Perfil=a.Foto+"?"+(new Date).getTime(),this.loading=!1,this.modalA.hide(),this.ngZone.run(()=>{})}))})}cambiarpwd(){null!=this.pwd?null!=this.npwd?this.npwd==this.npwd1?this.npwd.length<8?this.toast.warning("","La contrase\xf1a debe tener al menos 8 caracteres"):this.subscriptions.add(this.auth.CambiarPwd({IdUsuario:this.auth.user.IdUsuario,Pwd:this.pwd,NPwd:this.npwd}).subscribe(t=>{1==t.updated?(O().fire("\xa1Contrase\xf1a actualizada!","Recuerde este cambio cuando inicie sesi\xf3n","success"),this.pwd=null,this.npwd=null,this.npwd1=null):O().fire("\xa1La contrase\xf1a no fue actualizada!","Por favor intente nuevamente.","error")})):this.toast.warning("","Las contrase\xf1as no coinciden"):this.toast.warning("","La nueva contrase\xf1a es obligatoria"):this.toast.warning("","La contrase\xf1a actual es obligatoria")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(N.z),e.Y36(Y.e),e.Y36(e.R0b),e.Y36(X._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-usuarios"]],decls:192,vars:13,consts:[[1,"page-container",3,"ngClass"],[1,"main-content"],[1,"page-header","no-gutters","has-tab"],[1,"font-weight-normal"],[1,"nav","nav-tabs"],[1,"nav-item"],["data-toggle","tab","href","#tab-account",1,"nav-link","active"],[1,"container"],[1,"tab-content","m-t-15"],["id","tab-account",1,"tab-pane","fade","show","active"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"media","align-items-center"],[1,"avatar","avatar-image","m-h-10","m-r-15","me-2",2,"height","80px","width","80px"],["alt","User",1,"img-profile-sup",3,"src"],[1,"frame","frame2"],[1,"m-l-20","m-r-20"],[1,"m-b-5","font-size-18"],[1,"opacity-07","font-size-13","m-b-0"],["for","inputPerfil ms-3"],["type","button","data-bs-toggle","modal","data-bs-target","#cropperModal",1,"btn","btn-tone","btn-profile","btn-light"],["type","file","id","inputPerfil","placeholder","Sube una foto",1,"form-control",2,"display","none"],[1,"m-v-25"],[1,"form-row"],[1,"form-group","ms-1","me-2"],["for","firstName",1,"font-weight-semibold"],["type","text","name","firstName","disabled","","placeholder","Nombre",1,"form-control","disabled",3,"ngModel","ngModelChange"],["for","lastName",1,"font-weight-semibold"],["type","text","name","lastName","disabled","","placeholder","Apellido Paterno",1,"form-control","disabled",3,"ngModel","ngModelChange"],["for","lastName2",1,"font-weight-semibold"],["type","text","id","lastName2","disabled","","placeholder","Apellido Materno",1,"form-control","disabled"],[1,"form-row","mt-2"],["for","email",1,"font-weight-semibold"],["type","email","name","email","disabled","","placeholder","Email",1,"form-control","disabled",3,"ngModel","ngModelChange"],["for","phoneNumber",1,"font-weight-semibold"],["type","text","name","Celular","id","phoneNumber","disabled","","placeholder","Celular",1,"form-control","disabled",3,"ngModel","ngModelChange"],["for","puesto",1,"font-weight-semibold"],["type","text","id","puesto","disabled","","placeholder","Puesto","value","Programador",1,"form-control","disabled"],["id","form-password","novalidate","novalidate"],[1,"form-group","ms-1","col-md-3","col-sm-6","me-1"],["for","oldPassword",1,"font-weight-semibold"],["type","password","id","oldPassword","name","oldPassword","placeholder","Contrase\xf1a Actual",1,"form-control",3,"ngModel","ngModelChange"],["for","newPassword",1,"font-weight-semibold"],["type","password","id","newPassword","name","newPassword","placeholder","Contrase\xf1a Nueva",1,"form-control",3,"ngModel","ngModelChange"],["for","confirmPassword",1,"font-weight-semibold"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirmar Contrase\xf1a",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","col-md-3","col-sm-6","xx","d-flex"],[1,"btn","btn-primary","m-t-35","middle-button",3,"click"],["id","tab-files",1,"tab-pane","fade"],[1,"row"],[1,"col-md-8","mx-auto"],[1,"list-group","list-group-flush"],[1,"list-group-item","p-h-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center"],[1,"avatar","avatar-icon",2,"color","#4267b1","background","rgba(66, 103, 177, 0.1)"],[1,"anticon","anticon-facebook"],[1,"font-size-15","font-weight-semibold","m-l-15"],[1,"m-b-0"],[1,"switch","m-t-5","m-l-10"],["type","checkbox","id","switch-fb","checked",""],["for","switch-fb"],[1,"avatar","avatar-icon",2,"color","#fff","background","radial-gradient(circle at 30% 107%, #fdf497 0%, #fdf497 5%, #fd5949 45%,#d6249f 60%,#285AEB 90%)"],[1,"anticon","anticon-instagram"],["type","checkbox","id","switch-inst"],["for","switch-inst"],[1,"avatar","avatar-icon",2,"color","#1ca1f2","background","rgba(28, 161, 242, 0.1)"],[1,"anticon","anticon-twitter"],["type","checkbox","id","switch-tw","checked",""],["for","switch-tw"],[1,"avatar","avatar-icon",2,"color","#d8487e","background","rgba(216, 72, 126, 0.1)"],[1,"anticon","anticon-dribbble"],["type","checkbox","id","switch-dr"],["for","switch-dr"],[1,"avatar","avatar-icon",2,"color","#323131","background","rgba(50, 49, 49, 0.1)"],[1,"anticon","anticon-github"],["type","checkbox","id","switch-gh","checked",""],["for","switch-gh"],[1,"avatar","avatar-icon",2,"color","#0174af","background","rgba(1, 116, 175, 0.1)"],[1,"anticon","anticon-linkedin"],["type","checkbox","id","switch-ln","checked",""],["for","switch-ln"],[1,"avatar","avatar-icon",2,"color","#005ef7","background","rgba(0, 94, 247, 0.1)"],[1,"anticon","anticon-dropbox"],["type","checkbox","id","switch-db"],["for","switch-db"],[1,"footer"],[1,"footer-content"],["id","cropperModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"loading","onDefineImage"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4,"Perfil"),e.qZA(),e.TgZ(5,"ul",4),e.TgZ(6,"li",5),e.TgZ(7,"a",6),e._uU(8,"Cuenta"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"div",11),e.TgZ(14,"h4",12),e._uU(15,"Informaci\xf3n Basica"),e.qZA(),e.qZA(),e.TgZ(16,"div",13),e.TgZ(17,"div",14),e.TgZ(18,"div",15),e._UZ(19,"img",16),e._UZ(20,"div",17),e.qZA(),e.TgZ(21,"div",18),e.TgZ(22,"h5",19),e._uU(23,"Cambiar Foto Perfil"),e.qZA(),e.TgZ(24,"p",20),e._uU(25," Medidas Recomendadas: "),e._UZ(26,"br"),e._uU(27," 120x120 Tama\xf1o maximo: 5MB "),e.qZA(),e.qZA(),e.TgZ(28,"div"),e.TgZ(29,"label",21),e.TgZ(30,"button",22),e._uU(31," Editar "),e.qZA(),e.qZA(),e._UZ(32,"input",23),e.qZA(),e.qZA(),e._UZ(33,"hr",24),e.TgZ(34,"form"),e.TgZ(35,"div",25),e.TgZ(36,"div",26),e.TgZ(37,"label",27),e._uU(38,"Nombre:"),e.qZA(),e.TgZ(39,"input",28),e.NdJ("ngModelChange",function(a){return i.userData.Nombre=a}),e.qZA(),e.qZA(),e.TgZ(40,"div",26),e.TgZ(41,"label",29),e._uU(42,"Apellido Paterno:"),e.qZA(),e.TgZ(43,"input",30),e.NdJ("ngModelChange",function(a){return i.userData.Apellidos=a}),e.qZA(),e.qZA(),e.TgZ(44,"div",26),e.TgZ(45,"label",31),e._uU(46,"Apellido Materno:"),e.qZA(),e._UZ(47,"input",32),e.qZA(),e.qZA(),e.TgZ(48,"div",33),e.TgZ(49,"div",26),e.TgZ(50,"label",34),e._uU(51,"Email:"),e.qZA(),e.TgZ(52,"input",35),e.NdJ("ngModelChange",function(a){return i.userData.Correo=a}),e.qZA(),e.qZA(),e.TgZ(53,"div",26),e.TgZ(54,"label",36),e._uU(55,"Celular:"),e.qZA(),e.TgZ(56,"input",37),e.NdJ("ngModelChange",function(a){return i.userData.Telefono=a}),e.qZA(),e.qZA(),e.TgZ(57,"div",26),e.TgZ(58,"label",38),e._uU(59,"Puesto:"),e.qZA(),e._UZ(60,"input",39),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(61,"div",10),e.TgZ(62,"div",11),e.TgZ(63,"h4",12),e._uU(64,"Cambiar Contrase\xf1a"),e.qZA(),e.qZA(),e.TgZ(65,"div",13),e.TgZ(66,"form",40),e.TgZ(67,"div",25),e.TgZ(68,"div",41),e.TgZ(69,"label",42),e._uU(70,"Contrase\xf1a Actual:"),e.qZA(),e.TgZ(71,"input",43),e.NdJ("ngModelChange",function(a){return i.pwd=a}),e.qZA(),e.qZA(),e.TgZ(72,"div",41),e.TgZ(73,"label",44),e._uU(74,"Contrase\xf1a Nueva:"),e.qZA(),e.TgZ(75,"input",45),e.NdJ("ngModelChange",function(a){return i.npwd=a}),e.qZA(),e.qZA(),e.TgZ(76,"div",41),e.TgZ(77,"label",46),e._uU(78,"Confirmar Contrase\xf1a:"),e.qZA(),e.TgZ(79,"input",47),e.NdJ("ngModelChange",function(a){return i.npwd1=a}),e.qZA(),e.qZA(),e.TgZ(80,"div",48),e.TgZ(81,"button",49),e.NdJ("click",function(){return i.cambiarpwd()}),e._uU(82,"Cambiar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(83,"div",50),e.TgZ(84,"div",51),e.TgZ(85,"div",52),e.TgZ(86,"div",10),e.TgZ(87,"div",11),e.TgZ(88,"h4",12),e._uU(89,"Network Integration"),e.qZA(),e.qZA(),e.TgZ(90,"div",13),e.TgZ(91,"ul",53),e.TgZ(92,"li",54),e.TgZ(93,"div",55),e.TgZ(94,"div",56),e.TgZ(95,"div",57),e._UZ(96,"i",58),e.qZA(),e.TgZ(97,"div",59),e._uU(98,"Facebook"),e.qZA(),e.qZA(),e.TgZ(99,"div",56),e.TgZ(100,"label",60),e._uU(101,"https://facebook.com"),e.qZA(),e.TgZ(102,"div",61),e._UZ(103,"input",62),e._UZ(104,"label",63),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(105,"li",54),e.TgZ(106,"div",55),e.TgZ(107,"div",56),e.TgZ(108,"div",64),e._UZ(109,"i",65),e.qZA(),e.TgZ(110,"div",59),e._uU(111,"Instagram "),e.qZA(),e.qZA(),e.TgZ(112,"div",56),e.TgZ(113,"div",61),e._UZ(114,"input",66),e._UZ(115,"label",67),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(116,"li",54),e.TgZ(117,"div",55),e.TgZ(118,"div",56),e.TgZ(119,"div",68),e._UZ(120,"i",69),e.qZA(),e.TgZ(121,"div",59),e._uU(122,"Twitter"),e.qZA(),e.qZA(),e.TgZ(123,"div",56),e.TgZ(124,"label",60),e._uU(125,"https://twitter.com"),e.qZA(),e.TgZ(126,"div",61),e._UZ(127,"input",70),e._UZ(128,"label",71),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(129,"li",54),e.TgZ(130,"div",55),e.TgZ(131,"div",56),e.TgZ(132,"div",72),e._UZ(133,"i",73),e.qZA(),e.TgZ(134,"div",59),e._uU(135,"Dribbble"),e.qZA(),e.qZA(),e.TgZ(136,"div",56),e.TgZ(137,"div",61),e._UZ(138,"input",74),e._UZ(139,"label",75),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(140,"li",54),e.TgZ(141,"div",55),e.TgZ(142,"div",56),e.TgZ(143,"div",76),e._UZ(144,"i",77),e.qZA(),e.TgZ(145,"div",59),e._uU(146,"Github"),e.qZA(),e.qZA(),e.TgZ(147,"div",56),e.TgZ(148,"label",60),e._uU(149,"https://github.com"),e.qZA(),e.TgZ(150,"div",61),e._UZ(151,"input",78),e._UZ(152,"label",79),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(153,"li",54),e.TgZ(154,"div",55),e.TgZ(155,"div",56),e.TgZ(156,"div",80),e._UZ(157,"i",81),e.qZA(),e.TgZ(158,"div",59),e._uU(159,"Linkedin"),e.qZA(),e.qZA(),e.TgZ(160,"div",56),e.TgZ(161,"label",60),e._uU(162,"https://linkedin.com"),e.qZA(),e.TgZ(163,"div",61),e._UZ(164,"input",82),e._UZ(165,"label",83),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(166,"li",54),e.TgZ(167,"div",55),e.TgZ(168,"div",56),e.TgZ(169,"div",84),e._UZ(170,"i",85),e.qZA(),e.TgZ(171,"div",59),e._uU(172,"Dropbox"),e.qZA(),e.qZA(),e.TgZ(173,"div",56),e.TgZ(174,"div",61),e._UZ(175,"input",86),e._UZ(176,"label",87),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(177,"footer",88),e.TgZ(178,"div",89),e._UZ(179,"p",60),e.qZA(),e.qZA(),e.TgZ(180,"div",90),e.TgZ(181,"div",91),e.TgZ(182,"div",92),e.TgZ(183,"div",93),e.TgZ(184,"h5",94),e._uU(185,"Recortar imagen"),e.qZA(),e._UZ(186,"button",95),e.qZA(),e.TgZ(187,"div",96),e.TgZ(188,"app-cropperjs",97),e.NdJ("onDefineImage",function(a){return i.subirImagen(a)}),e.qZA(),e.qZA(),e.TgZ(189,"div",98),e.TgZ(190,"button",99),e._uU(191,"Close"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(10,ve,i.app.sidebarState,!i.app.sidebarState)),e.xp6(19),e.MGl("src","",i.app.dominio,"pruebas_dwit/admin/Content/img/admins/avatar.png",e.LSH),e.xp6(20),e.Q6J("ngModel",i.userData.Nombre),e.xp6(4),e.Q6J("ngModel",i.userData.Apellidos),e.xp6(9),e.Q6J("ngModel",i.userData.Correo),e.xp6(4),e.Q6J("ngModel",i.userData.Telefono),e.xp6(15),e.Q6J("ngModel",i.pwd),e.xp6(4),e.Q6J("ngModel",i.npwd),e.xp6(4),e.Q6J("ngModel",i.npwd1),e.xp6(109),e.Q6J("loading",i.loading))},directives:[M.mk,v._Y,v.JL,v.F,v.Fj,v.JJ,v.On,xe],styles:[".form-row[_ngcontent-%COMP%]{display:flex;margin-right:-5px;margin-left:-5px}.middle-button[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;flex-flow:row;justify-content:center;align-self:end}.xx[_ngcontent-%COMP%]{justify-content:center}"]}),o})()}];let ye=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[U.Bz.forChild(Me)],U.Bz]}),o})(),Ce=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[M.ez,_e]]}),o})();var be=f(5503);let we=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[M.ez,ye,v.u5,Ce,be.D]]}),o})()}}]);