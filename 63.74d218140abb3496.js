"use strict";(self.webpackChunkproyectoprueba=self.webpackChunkproyectoprueba||[]).push([[63,154],{6878:(k,T,l)=>{l.d(T,{f:()=>e});var A=l(5861),p=l(9863),C=l(7556),s=l(4383),d=l(780);let e=(()=>{class g{constructor(u,b,f){this.auth=u,this.toast=b,this.router=f}canActivate(u){let b=u.data.grant;return 0===this.auth.menus.length?this.getMenus(b):!!this.auth.menus.includes(b)||(this.toast.error("No tienes permiso para realizar esta acci\xf3n","Acceso denegado"),this.router.navigateByUrl("/crm"),!1)}getMenus(u){return(0,A.Z)(function*(){return console.log("enmenu"),new Promise((b,f)=>{b(!0)})})()}}return g.\u0275fac=function(u){return new(u||g)(p.LFG(C.e),p.LFG(s._W),p.LFG(d.F0))},g.\u0275prov=p.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},1063:(k,T,l)=>{l.r(T),l.d(T,{ConfiguracionModule:()=>fe});var A=l(6215),p=l(9808),C=l(2654),s=l(5226),d=l.n(s),e=l(9863),g=l(6475),Z=l(7556),u=l(2340),b=l(520);let f=(()=>{class i{constructor(t){this.http=t,this.urlIP=u.N.api+"crm_usuarios/crear_usuarios",this.urlGetPer=u.N.api+"crm_usuarios/listar_usuarios",this.ulrLTipoU=u.N.api+"crm_usuarios/listar_tipousuarios",this.urlObtenerUsuarioId=u.N.api+"crm_usuarios/obtener_usuario_por_id",this.urlEditarUsuario=u.N.api+"crm_usuarios/editar_usuarios",this.urlObtenerPerfiles=u.N.api+"crm_usuarios/listar_perfiles",this.urlcrearPerfil=u.N.api+"crm_usuarios/crear_perfil",this.urlFiltrarPerfilId=u.N.api+"crm_usuarios/obtener_perfil_por_id",this.urlEditarPerfil=u.N.api+"crm_usuarios/editar_perfiles",this.urlVerMenus=u.N.api+"crm_usuarios/listar_menus",this.urlVerMenusId=u.N.api+"crm_usuarios/menu_id",this.urlObtenerNiveles=u.N.api+"crm_reportes/ObtenerNiveles",this.urlInsertarColumna=u.N.api+"crm_reportes/InsertarColumna/",this.urlEliminarColumna=u.N.api+"crm_reportes/EliminarColumna/",this.urlInsertarComisiones=u.N.api+"crm_reportes/InsertarComisiones",this.urlInsertarnuevonivel=u.N.api+"crm_reportes/InsertarNuevoNivel",this.urlEditarPermisos=u.N.api+"crm_usuarios/permisos_perfil"}crearPerfiles(t){return this.http.post(this.urlIP,t)}listarPerfiles(){return this.http.get(this.urlGetPer)}Insertarnuevonivel(t){return this.http.post(this.urlInsertarnuevonivel,t)}InsertarComisiones(t){return this.http.post(this.urlInsertarComisiones,t)}ObtenerNiveles(){return this.http.get(this.urlObtenerNiveles)}InsertarColumna(t){return this.http.get(this.urlInsertarColumna+t)}EliminarColumna(t){return this.http.get(this.urlEliminarColumna+t)}listarTipoUsuario(){return this.http.get(this.ulrLTipoU)}UsuarioPorId(t){return this.http.post(this.urlObtenerUsuarioId,t)}EditarUsuario(t){return this.http.post(this.urlEditarUsuario,t)}ObtenerPerfiles(t){return this.http.post(this.urlObtenerPerfiles,t)}CrearPerfil(t){return this.http.post(this.urlcrearPerfil,t)}PerfilPorId(t){return this.http.post(this.urlFiltrarPerfilId,t)}EditarPerfil(t){return this.http.post(this.urlEditarPerfil,t)}ListarMenus(){return this.http.get(this.urlVerMenus)}ListarMenusId(t){return this.http.post(this.urlVerMenusId,t)}EditarPermisos(t){return this.http.post(this.urlEditarPermisos,t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(b.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var E=l(4383),c=l(4182),I=l(6936),N=l(1009);function m(i,a){if(1&i&&(e.TgZ(0,"option",25),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.IdPerfil),e.xp6(1),e.hij(" ",t.Nombre," ")}}const M=function(i,a){return{sidebar_is_full:i,sidebar_is_small:a}};let _=(()=>{class i{constructor(t,n,o,r){this.app=t,this.auth=n,this.CRMService=o,this.toast=r,this.personas=[],this.usuario=null,this.subscriptions=new C.w,this.fecha=null,this.fech=null,this.newusuario=null,this.newapellido=null,this.newcorreo=null,this.id_newperfil=null,this.newtelefono=null,this.configDataTable={fields:[{text:"Nombre colaborador",value:"Nombre",hasImage:!0,pipe:null},{text:"Perfil",value:"Perfil",hasImage:!1,pipe:null},{text:"Email",value:"Correo",hasImage:!1,pipe:null},{text:"Estatus",value:"Status",hasImage:!1,pipe:null}],editable:!0,urlMedia:this.app.dominio+"api/storage/usuarios/perfiles/",idField:"IdUsuario",urlEdit:"/crm/configuracion/editarusuario/",fotoField:"Foto_Perfil",filtroA:{data:[{value:"Inactivo",texto:"Inactivos"},{value:"Activo",texto:"Activos"}],fieldFilter:"Status"}},this.loading=!0,this.app.currentModule="Configuracion",this.app.currentSection="- Usuarios",this.usuario=this.auth.user.Nombre}ngOnInit(){this.listarUsuarios(),this.subscriptions.add(this.CRMService.ObtenerPerfiles({Opcion:0}).subscribe(t=>{console.log(t),this.tipo_personas=t.perfiles,this.loading=!1}))}actualizarfecha(){this.fecha=Date.now(),this.fech=(new Date).toISOString().slice(0,19).replace("T"," ")}CrearUsuario(){null!=this.newusuario?null!=this.newapellido?null!=this.newcorreo?null!=this.newtelefono?this.subscriptions=this.CRMService.crearPerfiles({Nombre:this.newusuario,Apellido:this.newapellido,Correo:this.newcorreo,Telefono:this.newtelefono,TipoUsuario:this.id_newperfil,fecha:this.fech,usr_add:this.usuario}).subscribe(t=>{console.log(t),1==t.insert?(this.personas.unshift(t.record),d().fire("\xa1Usuario creado!","Se ha enviado un mensaje al correo se\xf1alado con sus credenciales","success")):d().fire("\xa1El usuario no fue creado!","Por favor intente nuevamente.","error")}):this.toast.warning("","El numero de telefono es obligatorio"):this.toast.warning("","El correo electronico es obligatorio"):this.toast.warning("","El apellido es obligatorio"):this.toast.warning("","El nombre es obligatorio")}listarUsuarios(){this.subscriptions.add(this.CRMService.listarPerfiles().subscribe(t=>{console.log(t),this.personas=t.usuarios,this.loading=!1}))}change(){console.log(this.id_newperfil)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.z),e.Y36(Z.e),e.Y36(f),e.Y36(E._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-usuario"]],decls:40,vars:16,consts:[[1,"page-container",3,"ngClass"],[1,"main-content"],["type","button","id","add","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["for",""],["type","text",1,"form-control","nombre",3,"ngModel","ngModelChange"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","email","required","",1,"form-control","email",3,"ngModel","ngModelChange"],["name","tipo_usuario",1,"form-control","tipo_usuario",3,"ngModel","change","ngModelChange"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","text","name","fecha","id","fecha","readonly","","hidden","",1,"form-control","fecha",3,"ngModel","ngModelChange"],["type","text","name","fecha","id","usuario","readonly","","hidden","",1,"form-control","usuario",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-success",3,"click"],[3,"dataList","config","loading"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.actualizarfecha()}),e._UZ(3,"i",3),e._uU(4," Crear nuevo usuario "),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"h5",8),e._uU(10,"Crear nuevo usuario"),e.qZA(),e._UZ(11,"button",9),e.qZA(),e.TgZ(12,"div",10),e.TgZ(13,"label",11),e._uU(14,"Nombre"),e.qZA(),e.TgZ(15,"input",12),e.NdJ("ngModelChange",function(r){return n.newusuario=r}),e.qZA(),e.TgZ(16,"label",11),e._uU(17,"Apellido"),e.qZA(),e.TgZ(18,"input",13),e.NdJ("ngModelChange",function(r){return n.newapellido=r}),e.qZA(),e.TgZ(19,"label",11),e._uU(20," Correo"),e.qZA(),e.TgZ(21,"input",14),e.NdJ("ngModelChange",function(r){return n.newcorreo=r}),e.qZA(),e.TgZ(22,"label",11),e._uU(23," Telefono"),e.qZA(),e.TgZ(24,"input",15),e.NdJ("ngModelChange",function(r){return n.newtelefono=r}),e.qZA(),e.TgZ(25,"label",11),e._uU(26,"Tipo de usuario"),e.qZA(),e.TgZ(27,"select",16),e.NdJ("change",function(){return n.change()})("ngModelChange",function(r){return n.id_newperfil=r}),e.TgZ(28,"option",17),e._uU(29,"Selecciona una opci\xf3n"),e.qZA(),e.YNc(30,m,2,2,"option",18),e.qZA(),e.TgZ(31,"input",19),e.NdJ("ngModelChange",function(r){return n.fech=r}),e.qZA(),e.TgZ(32,"input",20),e.NdJ("ngModelChange",function(r){return n.usuario=r}),e.qZA(),e.qZA(),e.TgZ(33,"div",21),e.TgZ(34,"button",22),e._uU(35,"Cancelar"),e.qZA(),e.TgZ(36,"button",23),e.NdJ("click",function(){return n.CrearUsuario()}),e._uU(37,"Crear usuario"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(38,"app-datatable",24),e.qZA(),e._UZ(39,"app-footer"),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(13,M,n.app.sidebarState,!n.app.sidebarState)),e.xp6(15),e.Q6J("ngModel",n.newusuario),e.xp6(3),e.Q6J("ngModel",n.newapellido),e.xp6(3),e.Q6J("ngModel",n.newcorreo),e.xp6(3),e.Q6J("ngModel",n.newtelefono),e.xp6(3),e.Q6J("ngModel",n.id_newperfil),e.xp6(1),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",n.tipo_personas),e.xp6(1),e.Q6J("ngModel",n.fech),e.xp6(1),e.Q6J("ngModel",n.usuario),e.xp6(6),e.Q6J("dataList",n.personas)("config",n.configDataTable)("loading",n.loading))},directives:[p.mk,c.Fj,c.JJ,c.On,c.Q7,c.EJ,c.YN,c.Kr,p.sg,I.n,N.c],styles:[".img-cons[_ngcontent-%COMP%]{width:43%}.main-content[_ngcontent-%COMP%]{text-align:center}#add[_ngcontent-%COMP%]{color:#fff;margin-left:60vw;margin-bottom:20px}"]}),i})();var v=l(780);const y=function(i,a){return{sidebar_is_full:i,sidebar_is_small:a}};let U=(()=>{class i{constructor(t,n,o){this.app=t,this.auth=n,this.CRMService=o,this.configDataTable={fields:[{text:"Nombre Perfil",value:"Nombre",hasImage:!1,pipe:null},{text:"Estatus",value:"Status",hasImage:!1,pipe:null}],editable:!0,urlEdit:"/crm/configuracion/editarperfil/",idField:"IdPerfil",filtroA:{data:[{value:"Inactivo",texto:"Inactivos"},{value:"Activo",texto:"Activos"}],fieldFilter:"Status"}},this.loading=!0,this.subscriptions=new C.w}ngOnInit(){this.app.currentModule="Configuracion",this.app.currentSection="- Perfiles",this.usuario=this.auth.user.Nombre,this.subscriptions.add(this.CRMService.ObtenerPerfiles({Opcion:1}).subscribe(t=>{this.loading=!1,this.perfiles=t.perfiles,console.log(t)}))}actualizarfecha(){this.fech=(new Date).toISOString().slice(0,19).replace("T"," ")}CrearPerfil(){this.subscriptions=this.CRMService.CrearPerfil({Perfil:this.newperfil,fecha:this.fech,Usuario:this.usuario}).subscribe(t=>{console.log(t),this.perfiles.unshift(t.record),1==t.insert?d().fire("Perfil creado!","Recuerda asignarle permisos desde el panel de perfiles","success"):d().fire("\xa1El perfil no fue creado!","Por favor intente nuevamente.","error")})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.z),e.Y36(Z.e),e.Y36(f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-perfil"]],decls:25,vars:10,consts:[[1,"page-container",3,"ngClass"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["for",""],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","fecha","id","fecha","readonly","","hidden","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","fecha","id","usuario","readonly","","hidden","",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-success",3,"click"],[1,"main-content"],["type","button","id","add","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[3,"dataList","config","loading"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h5",5),e._uU(6,"Crear nuevo perfil"),e.qZA(),e._UZ(7,"button",6),e.qZA(),e.TgZ(8,"div",7),e.TgZ(9,"label",8),e._uU(10,"Nombre Perfil"),e.qZA(),e.TgZ(11,"input",9),e.NdJ("ngModelChange",function(r){return n.newperfil=r}),e.qZA(),e.TgZ(12,"input",10),e.NdJ("ngModelChange",function(r){return n.fech=r}),e.qZA(),e.TgZ(13,"input",11),e.NdJ("ngModelChange",function(r){return n.usuario=r}),e.qZA(),e.qZA(),e.TgZ(14,"div",12),e.TgZ(15,"button",13),e._uU(16,"Cancelar"),e.qZA(),e.TgZ(17,"button",14),e.NdJ("click",function(){return n.CrearPerfil()}),e._uU(18,"Crear perfil"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",15),e.TgZ(20,"button",16),e.NdJ("click",function(){return n.actualizarfecha()}),e._UZ(21,"i",17),e._uU(22," Crear nuevo perfil "),e.qZA(),e._UZ(23,"app-datatable",18),e.qZA(),e._UZ(24,"app-footer"),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(7,y,n.app.sidebarState,!n.app.sidebarState)),e.xp6(11),e.Q6J("ngModel",n.newperfil),e.xp6(1),e.Q6J("ngModel",n.fech),e.xp6(1),e.Q6J("ngModel",n.usuario),e.xp6(10),e.Q6J("dataList",n.perfiles)("config",n.configDataTable)("loading",n.loading))},directives:[p.mk,c.Fj,c.JJ,c.On,I.n,N.c],styles:[".img-cons[_ngcontent-%COMP%]{width:43%}.main-content[_ngcontent-%COMP%]{text-align:center}#add[_ngcontent-%COMP%]{color:#fff;margin-left:60vw;margin-bottom:20px}"]}),i})();function P(i,a){if(1&i&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.IdPerfil),e.xp6(1),e.hij(" ",t.Nombre," ")}}const w=function(i,a){return{sidebar_is_full:i,sidebar_is_small:a}};let J=(()=>{class i{constructor(t,n,o,r){this.app=t,this.auth=n,this.CRMService=o,this.router=r,this.persona={},this.subscriptions=new C.w,this.label="El usuario permanecer\xe1 activo",this.tipo_personas=null,this.tipo_persona=null,this.fech=null,this.usuario=null,this.tipousuarion=null}ngOnInit(){this.router.paramMap.subscribe(t=>{const n=t.params.id;console.log(n),this.id=n,this.usuario=this.auth.user.Nombre}),this.subscriptions.add(this.CRMService.UsuarioPorId({Id:this.id}).subscribe(t=>{this.persona=t.usuario,console.log(this.persona),this.tipousuarion=this.persona.IdPerfil,0==this.persona.IdStatus&&(this.label="El usuario quedar\xe1 inactivo")})),this.subscriptions.add(this.CRMService.ObtenerPerfiles({Opcion:0}).subscribe(t=>{this.tipo_personas=t.perfiles,console.log(t)}))}status(){1==this.persona.IdStatus?(this.persona.IdStatus=1,this.label="El usuario permanecer\xe1 activo"):0==this.persona.IdStatus&&(this.label="El usuario quedar\xe1 inactivo",this.persona.IdStatus=0)}ActualizarUsuario(){this.subscriptions=this.CRMService.EditarUsuario({Id:this.id,Nombre:this.persona.Nombre,Apellido:this.persona.Apellidos,Correo:this.persona.Correo,Telefono:this.persona.Telefono,TipoUsuario:this.tipousuarion,fecha:this.actualizarfecha(),usr_add:this.usuario,Status:this.persona.IdStatus}).subscribe(t=>{1==t.Update?d().fire("\xa1Usuario actualizado!","Los datos del usuario se han modificado con \xe9xito","success"):d().fire("\xa1El usuario no fue actualizado!","Por favor intente nuevamente.","error")})}actualizarfecha(){return this.fech=(new Date).toISOString().slice(0,19).replace("T"," "),this.fech}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.z),e.Y36(Z.e),e.Y36(f),e.Y36(v.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-editar-usuario"]],decls:48,vars:13,consts:[[1,"page-container",3,"ngClass"],[1,"main-content"],[1,"page-header","no-gutters"],["id","pills-tab","role","tablist",1,"nav","nav-pills","mb-3"],["role","presentation",1,"nav-item"],["id","pills-home-tab","data-bs-toggle","pill","data-bs-target","#pills-home","type","button","role","tab","aria-controls","pills-home","aria-selected","true",1,"nav-link","active"],[1,"container"],["id","pills-tabContent",1,"tab-content"],["id","pills-home","role","tabpanel","aria-labelledby","pills-home-tab",1,"tab-pane","fade","show","active"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-6"],["for","nombre",1,"form-label"],["type","text","name","nombre","placeholder","Nombre",1,"form-control",3,"ngModel","ngModelChange"],["for","segundonombre",1,"form-label"],["type","text","name","Apellido","placeholder","Apellido",1,"form-control",3,"ngModel","ngModelChange"],["for","email",1,"form-label"],["type","email","name","email","placeholder","Email",1,"form-control",3,"ngModel","ngModelChange"],["for","celular",1,"form-label",3,"ngModel","ngModelChange"],["type","tel","name","celular","placeholder","Celular",1,"form-control",3,"ngModel","ngModelChange"],["for",""],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12"],[1,"form-check","form-switch"],["type","checkbox","id","flexSwitchCheckChecked",1,"form-check-input",3,"ngModel","change","ngModelChange"],["for","flexSwitchCheckChecked",1,"form-check-label"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"footer"],[1,"footer-content"],[1,"m-b-0"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"ul",3),e.TgZ(4,"li",4),e.TgZ(5,"button",5),e._uU(6,"Cuenta"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e.TgZ(12,"h4",11),e._uU(13,"Informaci\xf3n Basica"),e.qZA(),e.qZA(),e.TgZ(14,"div",12),e.TgZ(15,"div",13),e.TgZ(16,"div",14),e.TgZ(17,"label",15),e._uU(18,"Nombre"),e.qZA(),e.TgZ(19,"input",16),e.NdJ("ngModelChange",function(r){return n.persona.Nombre=r}),e.qZA(),e.qZA(),e.TgZ(20,"div",14),e.TgZ(21,"label",17),e._uU(22,"Apellido"),e.qZA(),e.TgZ(23,"input",18),e.NdJ("ngModelChange",function(r){return n.persona.Apellidos=r}),e.qZA(),e.qZA(),e.TgZ(24,"div",14),e.TgZ(25,"label",19),e._uU(26,"Email"),e.qZA(),e.TgZ(27,"input",20),e.NdJ("ngModelChange",function(r){return n.persona.Correo=r}),e.qZA(),e.qZA(),e.TgZ(28,"div",14),e.TgZ(29,"label",21),e.NdJ("ngModelChange",function(r){return n.persona.Telefono=r}),e._uU(30,"Celular"),e.qZA(),e.TgZ(31,"input",22),e.NdJ("ngModelChange",function(r){return n.persona.Telefono=r}),e.qZA(),e.qZA(),e.TgZ(32,"div",14),e.TgZ(33,"label",23),e._uU(34,"Tipo de usuario"),e.qZA(),e.TgZ(35,"select",24),e.NdJ("ngModelChange",function(r){return n.tipousuarion=r}),e.YNc(36,P,2,2,"option",25),e.qZA(),e.qZA(),e.TgZ(37,"div",26),e.TgZ(38,"div",27),e.TgZ(39,"input",28),e.NdJ("change",function(){return n.status()})("ngModelChange",function(r){return n.persona.IdStatus=r}),e.qZA(),e.TgZ(40,"label",29),e._uU(41),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",26),e.TgZ(43,"button",30),e.NdJ("click",function(){return n.ActualizarUsuario()}),e._uU(44,"Actualizar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"footer",31),e.TgZ(46,"div",32),e._UZ(47,"p",33),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(10,w,n.app.sidebarState,!n.app.sidebarState)),e.xp6(19),e.Q6J("ngModel",n.persona.Nombre),e.xp6(4),e.Q6J("ngModel",n.persona.Apellidos),e.xp6(4),e.Q6J("ngModel",n.persona.Correo),e.xp6(2),e.Q6J("ngModel",n.persona.Telefono),e.xp6(2),e.Q6J("ngModel",n.persona.Telefono),e.xp6(4),e.Q6J("ngModel",n.tipousuarion),e.xp6(1),e.Q6J("ngForOf",n.tipo_personas),e.xp6(3),e.Q6J("ngModel",n.persona.IdStatus),e.xp6(2),e.hij(" ",n.label,""))},directives:[p.mk,c.Fj,c.JJ,c.On,c.EJ,p.sg,c.YN,c.Kr,c.Wl],styles:[""]}),i})();function S(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"input",33),e.NdJ("change",function(){e.CHM(t);const o=e.oxw().index;return e.oxw().Leer(o)}),e.qZA(),e.TgZ(2,"label",21),e._uU(3," Ver"),e.qZA(),e.qZA()}}function O(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"input",34),e.NdJ("change",function(){e.CHM(t);const o=e.oxw().index;return e.oxw().Leer(o)}),e.qZA(),e.TgZ(2,"label",21),e._uU(3," Ver"),e.qZA(),e.qZA()}}function F(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"input",35),e.NdJ("change",function(){e.CHM(t);const o=e.oxw().index;return e.oxw().Editar(o)}),e.qZA(),e.TgZ(2,"label",21),e._uU(3," Editar"),e.qZA(),e.qZA()}}function Q(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"input",34),e.NdJ("change",function(){e.CHM(t);const o=e.oxw().index;return e.oxw().Editar(o)}),e.qZA(),e.TgZ(2,"label",21),e._uU(3," Editar"),e.qZA(),e.qZA()}}function L(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"input",33),e.NdJ("change",function(){e.CHM(t);const o=e.oxw().index;return e.oxw().Eliminar(o)}),e.qZA(),e.TgZ(2,"label",21),e._uU(3," Eliminar"),e.qZA(),e.qZA()}}function B(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"input",34),e.NdJ("change",function(){e.CHM(t);const o=e.oxw().index;return e.oxw().Eliminar(o)}),e.qZA(),e.TgZ(2,"label",21),e._uU(3," Eliminar"),e.qZA(),e.qZA()}}const Y=function(i){return{seccion:i}},z=function(i){return{"ps-5":i}};function j(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"tr",28),e.TgZ(2,"td",28),e._uU(3),e.qZA(),e.TgZ(4,"td"),e.YNc(5,S,4,0,"div",29),e.YNc(6,O,4,0,"ng-template",null,30,e.W1O),e.qZA(),e.TgZ(8,"td"),e.YNc(9,F,4,0,"div",29),e.YNc(10,Q,4,0,"ng-template",null,31,e.W1O),e.qZA(),e.TgZ(12,"td"),e.YNc(13,L,4,0,"div",29),e.YNc(14,B,4,0,"ng-template",null,32,e.W1O),e.qZA(),e.qZA(),e.BQk()),2&i){const t=a.$implicit,n=e.MAs(7),o=e.MAs(11),r=e.MAs(15);e.xp6(1),e.Q6J("ngClass",e.VKq(9,Y,t.IdParent==t.IdMenu)),e.xp6(1),e.Q6J("ngClass",e.VKq(11,z,t.IdParent!=t.IdMenu)),e.xp6(1),e.hij(" ",t.Texto," "),e.xp6(2),e.Q6J("ngIf",1==t.Leer)("ngIfElse",n),e.xp6(4),e.Q6J("ngIf",1==t.Editar)("ngIfElse",o),e.xp6(4),e.Q6J("ngIf",1==t.Eliminar)("ngIfElse",r)}}const D=function(i,a){return{sidebar_is_full:i,sidebar_is_small:a}};let R=(()=>{class i{constructor(t,n,o,r){this.app=t,this.auth=n,this.CRMService=o,this.router=r,this.persona={},this.subscriptions=new C.w,this.label="El usuario permanecer\xe1 activo",this.tipo_personas=null,this.tipo_persona=null,this.fech=null,this.usuario=null,this.flag=!1,this.numero=1}ngOnInit(){this.router.paramMap.subscribe(t=>{const n=t.params.id;console.log(n),this.id=n,this.usuario=this.auth.user.Nombre,this.Desactivar()})}Desactivar(){this.subscriptions.add(this.CRMService.PerfilPorId({Id:this.id}).subscribe(t=>{this.persona=t.usuario,0==this.persona.IdStatus&&(this.label="El usuario quedar\xe1 inactivo"),this.listarmenusid()}))}listarmenusid(){this.subscriptions.add(this.CRMService.ListarMenusId({Id:this.id}).subscribe(t=>{this.menusid=t.Menus,console.log(this.menusid),this.recorrer()}))}recorrer(){this.subscriptions.add(this.CRMService.ListarMenus().subscribe(t=>{this.menus=t.Menus,console.log(this.menus);for(let n=0;n<this.menus.length;n++){this.menus[n].Leer=0,this.menus[n].Editar=0,this.menus[n].Eliminar=0;let o=this.menus[n];for(let r=0;r<this.menusid.length;r++){let h=this.menusid[r];if(h.IdMenu==o.IdMenu){this.menus[n].Leer=h.Leer,this.menus[n].Editar=h.Editar,this.menus[n].Eliminar=h.Eliminar;break}}}console.log(this.menus)}))}status(){1==this.persona.IdStatus?(this.persona.IdStatus=1,this.label="El usuario permanecer\xe1 activo"):0==this.persona.IdStatus&&(this.label="El usuario quedar\xe1 inactivo",this.persona.IdStatus=0)}ActualizarUsuario(){this.subscriptions=this.CRMService.EditarPerfil({Id:this.id,Nombre:this.persona.Nombre,Fecha:this.actualizarfecha(),Usuario:this.usuario,IdStatus:this.persona.IdStatus}).subscribe(t=>{console.log(t),1==t.Update?d().fire("\xa1Perfil actualizado!","La informacion b\xe1sica del perfil ha sido modificada.","success"):d().fire("\xa1El perfil no fue actualizado!","Por favor intente nuevamente.","error")})}actualizarfecha(){return this.fech=(new Date).toISOString().slice(0,19).replace("T"," "),this.fech}Editar(t){1==this.menus[t].Editar?this.menus[t].Editar=0:(0==this.menus[t].Leer&&(this.menus[t].Leer=1),this.menus[t].Editar=1),this.actualizarPermisos(t)}Leer(t){console.log(this.menus[t].Leer),1==this.menus[t].Leer?(this.menus[t].Leer=0,console.log(this.menus[t]),this.menus[t].Editar=0,this.menus[t].Eliminar=0):this.menus[t].Leer=1,this.actualizarPermisos(t)}Eliminar(t){console.log(this.menus[t].Eliminar),1==this.menus[t].Eliminar?(this.menus[t].Eliminar=0,console.log(this.menus[t])):(0==this.menus[t].Leer&&(this.menus[t].Leer=1),this.menus[t].Eliminar=1),this.actualizarPermisos(t)}actualizarPermisos(t){console.log(this.menus[t]),console.log(this.id),this.subscriptions=this.CRMService.EditarPermisos({IdPerfil:this.id,IdMenu:this.menus[t].IdMenu,Leer:this.menus[t].Leer,Editar:this.menus[t].Editar,Eliminar:this.menus[t].Eliminar}).subscribe(n=>{console.log(n)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.z),e.Y36(Z.e),e.Y36(f),e.Y36(v.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-editar-perfiles"]],decls:42,vars:8,consts:[[1,"page-container",3,"ngClass"],[1,"main-content"],[1,"page-header","no-gutters"],["id","pills-tab","role","tablist",1,"nav","nav-pills","mb-3"],["role","presentation",1,"nav-item"],["id","pills-home-tab","data-bs-toggle","pill","data-bs-target","#pills-home","type","button","role","tab","aria-controls","pills-home","aria-selected","true",1,"nav-link","active"],["id","pills-profile-tab","data-bs-toggle","pill","data-bs-target","#pills-profile","type","button","role","tab","aria-controls","pills-profile","aria-selected","false",1,"nav-link"],[1,"container"],["id","pills-tabContent",1,"tab-content"],["id","pills-home","role","tabpanel","aria-labelledby","pills-home-tab",1,"tab-pane","fade","show","active"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-6"],["for","nombre",1,"form-label"],["type","text","name","nombre","placeholder","Nombre",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12"],[1,"form-check","form-switch"],["type","checkbox","id","flexSwitchCheckChecked",1,"form-check-input",3,"ngModel","change","ngModelChange"],["for","flexSwitchCheckChecked",1,"form-check-label"],["type","submit",1,"btn","btn-primary",3,"click"],["id","pills-profile","role","tabpanel","aria-labelledby","pills-profile-tab",1,"tab-pane","fade"],[4,"ngFor","ngForOf"],[1,"footer"],[1,"footer-content"],[1,"m-b-0"],[3,"ngClass"],["class","form-check form-switch",4,"ngIf","ngIfElse"],["sino",""],["sinoE",""],["sinoEli",""],["type","checkbox","id","flexSwitchCheckChecked","checked","",1,"form-check-input",3,"change"],["type","checkbox","id","flexSwitchCheckChecked",1,"form-check-input",3,"change"],["type","checkbox","id","row.IdMenu","checked","",1,"form-check-input",3,"change"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"ul",3),e.TgZ(4,"li",4),e.TgZ(5,"button",5),e._uU(6," Perfil "),e.qZA(),e.qZA(),e.TgZ(7,"li",4),e.TgZ(8,"button",6),e._uU(9," Permisos "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",7),e.TgZ(11,"div",8),e.TgZ(12,"div",9),e.TgZ(13,"div",10),e.TgZ(14,"div",11),e.TgZ(15,"h4",12),e._uU(16,"Informaci\xf3n Perfil"),e.qZA(),e.qZA(),e.TgZ(17,"div",13),e.TgZ(18,"div",14),e.TgZ(19,"div",15),e.TgZ(20,"label",16),e._uU(21,"Nombre"),e.qZA(),e.TgZ(22,"input",17),e.NdJ("ngModelChange",function(r){return n.persona.Nombre=r}),e.qZA(),e.qZA(),e.TgZ(23,"div",18),e.TgZ(24,"div",19),e.TgZ(25,"input",20),e.NdJ("change",function(){return n.status()})("ngModelChange",function(r){return n.persona.IdStatus=r}),e.qZA(),e.TgZ(26,"label",21),e._uU(27),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",18),e.TgZ(29,"button",22),e.NdJ("click",function(){return n.ActualizarUsuario()}),e._uU(30," Actualizar "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",23),e.TgZ(32,"div",10),e.TgZ(33,"div",11),e.TgZ(34,"h4",12),e._uU(35,"Permisos Perfil"),e.qZA(),e.qZA(),e.TgZ(36,"div",13),e.TgZ(37,"table"),e.YNc(38,j,16,13,"ng-container",24),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"footer",25),e.TgZ(40,"div",26),e._UZ(41,"p",27),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(5,D,n.app.sidebarState,!n.app.sidebarState)),e.xp6(22),e.Q6J("ngModel",n.persona.Nombre),e.xp6(3),e.Q6J("ngModel",n.persona.IdStatus),e.xp6(2),e.hij(" ",n.label,""),e.xp6(11),e.Q6J("ngForOf",n.menus))},directives:[p.mk,c.Fj,c.JJ,c.On,c.Wl,p.sg,p.O5],styles:[".lista[_ngcontent-%COMP%]{font-size:large}table[_ngcontent-%COMP%]{width:100%;vertical-align:top}tr[_ngcontent-%COMP%]{vertical-align:baseline}.seccion[_ngcontent-%COMP%]{background-color:#000854;color:#fff}"]}),i})();var x=l(6878);function G(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"th",42),e._uU(2),e.qZA(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.key)}}function $(i,a){if(1&i&&(e.ynx(0),e.YNc(1,G,3,1,"ng-container",41),e.BQk()),2&i){const t=a.$implicit,n=e.oxw().index;e.xp6(1),e.Q6J("ngIf",0==n&&"Fch"!==t.key&&"IdComision"!==t.key&&"IdNivel"!==t.key&&"IdStatus"!==t.key&&"IdUsuario"!==t.key&&"Interes"!==t.key&&"Nivel"!==t.key)}}function W(i,a){if(1&i&&(e.ynx(0),e.YNc(1,$,2,1,"ng-container",16),e.ALo(2,"keyvalue"),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t))}}function H(i,a){1&i&&(e.ynx(0),e._uU(1," 0% "),e.BQk())}function K(i,a){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.value,"% ")}}function V(i,a){if(1&i&&(e.TgZ(0,"td",50),e.YNc(1,H,2,0,"ng-container",41),e.YNc(2,K,2,1,"ng-container",41),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null==t.value),e.xp6(1),e.Q6J("ngIf",null!==t.value)}}function X(i,a){if(1&i&&(e.ynx(0),e.YNc(1,V,3,2,"td",49),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf","Fch"!==t.key&&"IdComision"!==t.key&&"IdNivel"!==t.key&&"IdStatus"!==t.key&&"IdUsuario"!==t.key&&"Interes"!==t.key&&"Nivel"!==t.key)}}function ee(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit;return e.oxw().CambiarStatus(o)}),e._uU(1,"Desactivar"),e.qZA()}}function te(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit;return e.oxw().CambiarStatus(o)}),e._uU(1,"Activar"),e.qZA()}}function ne(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"th"),e._uU(2),e.qZA(),e.YNc(3,X,2,1,"ng-container",16),e.ALo(4,"keyvalue"),e.TgZ(5,"td",43),e.TgZ(6,"button",44),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().CambiarNombre(o)}),e._UZ(7,"i",45),e.qZA(),e.TgZ(8,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().Enviarid(o)}),e._uU(9,"Editar"),e.qZA(),e.YNc(10,ee,2,0,"button",47),e.YNc(11,te,2,0,"button",48),e.qZA(),e._UZ(12,"td"),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.Nivel),e.xp6(1),e.Q6J("ngForOf",e.lcZ(4,4,t)),e.xp6(7),e.Q6J("ngIf",1==t.IdStatus),e.xp6(1),e.Q6J("ngIf",0==t.IdStatus)}}function ie(i,a){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,ne,13,6,"ng-container",41),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.Nivel)}}function oe(i,a){1&i&&(e.TgZ(0,"div",52),e.TgZ(1,"div",53),e.TgZ(2,"span",54),e._uU(3,"Loading..."),e.qZA(),e.qZA(),e.qZA())}function re(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",5),e.TgZ(2,"form",55),e.TgZ(3,"label",56),e._uU(4),e.qZA(),e.TgZ(5,"div",57),e.TgZ(6,"input",58,59),e.NdJ("change",function(o){e.CHM(t);const r=e.MAs(7),h=e.oxw().$implicit;return e.oxw(2).CambiarComisiones(o,h,r.value)}),e.qZA(),e.TgZ(8,"p",60),e._uU(9,"%"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(4),e.Oqu(t.key),e.xp6(2),e.s9C("min",t.value),e.s9C("value",t.value)}}function ae(i,a){if(1&i&&(e.ynx(0),e.YNc(1,re,10,3,"ng-container",41),e.BQk()),2&i){const t=a.$implicit,n=e.oxw().index;e.xp6(1),e.Q6J("ngIf",0==n&&"Fch"!==t.key&&"IdComision"!==t.key&&"IdNivel"!==t.key&&"IdStatus"!==t.key&&"IdUsuario"!==t.key&&"Interes"!==t.key&&"Nivel"!==t.key)}}function se(i,a){if(1&i&&(e.ynx(0),e.YNc(1,ae,2,1,"ng-container",16),e.ALo(2,"keyvalue"),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t))}}function le(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",61),e.TgZ(2,"input",62),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(2).GuardarCheck(o.key)}),e.qZA(),e.TgZ(3,"label",63),e._uU(4),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("value",t.key),e.xp6(2),e.hij(" ",t.key," ")}}function ue(i,a){if(1&i&&(e.ynx(0),e.YNc(1,le,5,2,"ng-container",41),e.BQk()),2&i){const t=a.$implicit,n=e.oxw().index;e.xp6(1),e.Q6J("ngIf",0==n&&"Fch"!==t.key&&"IdComision"!==t.key&&"IdNivel"!==t.key&&"IdStatus"!==t.key&&"IdUsuario"!==t.key&&"Interes"!==t.key&&"Nivel"!==t.key)}}function ce(i,a){if(1&i&&(e.ynx(0),e.YNc(1,ue,2,1,"ng-container",16),e.ALo(2,"keyvalue"),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t))}}const de=function(i,a){return{sidebar_is_full:i,sidebar_is_small:a}};let ge=(()=>{class i{constructor(t,n,o){this.app=t,this.auth=n,this.CRMService=o,this.ArregloColumnas=[],this.configDataTable={},this.Ecoins=[],this.form=[],this.loading=!0,this.app.currentModule="Configuracion",this.app.currentSection=" - Comisiones"}ngOnInit(){this.cargardatos()}cargardatos(){this.CRMService.ObtenerNiveles().subscribe(t=>{this.comisiones=t[0],this.columnas=t[1],this.columnasitems=t[1],this.loading=!1,console.log(this.comisiones)})}Enviarid(t){this.Ecoins=[],this.idcomision=t,console.log(t)}CambiarComisiones(t,n,o){n.nuevo=o;let h=n;if(0==this.Ecoins.length)this.Ecoins.push(h);else{for(var q=0;q<this.Ecoins.length;q++)if(this.Ecoins[q].key==h.key){this.Ecoins.splice(q,1);break}this.Ecoins.push(h)}console.log(this.Ecoins)}Guardarnuevacomision(){console.log(this.Ecoins);let t=JSON.parse(localStorage.getItem("user_data"));d().mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:"\xbfEstas seguro?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, Estoy seguro",cancelButtonText:"No, Salir",reverseButtons:!0}).then(o=>{if(o.isConfirmed){for(let h=0;h<this.Ecoins.length;h++)this.CRMService.InsertarComisiones({Venta:this.Ecoins[h].nuevo,Fx:this.Ecoins[h].key,Id:this.idcomision.IdComision,Opcion:1,iduser:t.IdUsuario}).subscribe(q=>{this.comisiones=q});d().fire({position:"center",icon:"success",title:"Your work has been saved",showConfirmButton:!1,timer:1500}),document.getElementById("cerrar").click()}})}CambiarStatus(t){d().mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:"\xbfEstas seguro?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, Estoy seguro",cancelButtonText:"No, Salir",reverseButtons:!0}).then(o=>{if(o.isConfirmed){d().fire({position:"center",icon:"success",title:"Your work has been saved",showConfirmButton:!1,timer:1500}),console.log(t);let r=JSON.parse(localStorage.getItem("user_data"));console.log(r.IdUsuario,"si es el "),0==t.IdStatus?t.IdStatus=1:1==t.IdStatus&&(t.IdStatus=0),console.log(t.IdStatus),this.CRMService.InsertarComisiones({Id:t.IdComision,Opcion:2,AcDe:t.IdStatus,iduser:r.IdUsuario}).subscribe(h=>{console.log(h),document.getElementById("cerrar").click(),this.comisiones=h})}})}NuevoNivelfuncion(){document.getElementById("cerrardos").click();let n=JSON.parse(localStorage.getItem("user_data"));this.CRMService.Insertarnuevonivel({NivelNuevo:this.NivelNuevo,iduser:n.IdUsuario}).subscribe(o=>{console.log(o),this.comisiones=o})}CambiarNombre(t){this.nombrenivel=t.Nivel,this.Nombre=t}EditarNombre(){document.getElementById("cerrartres").click();let n=JSON.parse(localStorage.getItem("user_data"));console.log(this.nombrenivel),this.CRMService.InsertarComisiones({Id:this.Nombre.IdComision,Opcion:3,Nivel:this.nombrenivel,iduser:n.IdUsuario}).subscribe(o=>{this.comisiones=o})}AgregarColumna(){d().fire({title:"Introdusca nombre de la columna",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Aceptar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!d().isLoading()}).then(t=>{t.isConfirmed&&(console.log(t,this.comisiones),this.CRMService.InsertarColumna(t.value).subscribe(n=>{n.error?(d().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:r=>{r.addEventListener("mouseenter",d().stopTimer),r.addEventListener("mouseleave",d().resumeTimer)}}).fire({icon:"error",title:"Columna ya existe"}),this.cargardatos()):(this.comisiones=n[0],this.columnas=n[1])}))})}EliminarColumna(){for(let o=0;o<this.ArregloColumnas.length;o++)this.CRMService.EliminarColumna(this.ArregloColumnas[o]).subscribe(r=>{this.comisiones=r[0],this.columnas=r[1]});d().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",d().stopTimer),o.addEventListener("mouseleave",d().resumeTimer)}}).fire({icon:"success",title:"Signed in successfully"}),document.getElementById("eliminarcolumna").click()}GuardarCheck(t){let n=[],o=document.getElementsByName("columnas[]");for(var r=0;r<o.length;r++)o[r].checked&&n.push(o[r].value);this.ArregloColumnas=n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.z),e.Y36(Z.e),e.Y36(f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-comisiones"]],decls:90,vars:12,consts:[[1,"page-container",3,"ngClass"],[1,"main-content"],[1,"card"],[1,"card-body"],[1,"row",2,"margin-bottom","3rem"],[1,"col-md-6"],[2,"margin","0"],[1,"col-md-6","flex"],["type","button","data-bs-toggle","modal","data-bs-target","#Modalnivel",1,"btn","btn-success","botonagregar"],[1,"fas","fa-plus"],[1,"row","mb-12"],[1,"col-lg-12"],[1,"row","d-md-flex","table-responsive"],[1,"table"],[1,"table-dark"],["scope","col"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#eliminarcolumna",1,"btn","btn-danger","btn-sm"],[1,"fas","fa-minus"],["class","text-center",4,"ngIf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body",2,"display","flex","justify-content","space-around","flex-direction","column","align-items","center"],[1,"modal-footer"],["type","button","id","cerrar","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","type","submit",1,"btn","btn-primary",3,"click"],["id","Modalnivel","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-body"],[1,"col-md-12"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","button","id","cerrardos","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click"],["id","ModalNombre","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["type","button","id","cerrartres","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","eliminarcolumna","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[4,"ngIf"],["scope","col",2,"text-align","center"],[1,"margin"],["type","button","data-bs-toggle","modal","data-bs-target","#ModalNombre",1,"btn","btn-outline-info","btn-sm",3,"click"],[1,"fas","fa-edit"],["type","button","click","","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary","btn-sm",3,"click"],["type","button","class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["type","button","class","btn btn-success btn-sm",3,"click",4,"ngIf"],["style","text-align: center;",4,"ngIf"],[2,"text-align","center"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["role","form"],[1,"form-label"],[1,"d-flex","align-items-end"],["type","number",1,"form-control",3,"min","value","change"],["name",""],[2,"font-size","19px","margin","0","margin-bottom","5px"],[1,"form-check"],["name","columnas[]","type","checkbox","id","flexCheckDefault",1,"form-check-input",3,"value","click"],["for","flexCheckDefault",1,"form-check-label"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"h1",6),e._uU(7,"Dashboard - Editar Comisiones"),e.qZA(),e.qZA(),e.TgZ(8,"div",7),e.TgZ(9,"button",8),e._UZ(10,"i",9),e.qZA(),e.TgZ(11,"h5"),e._uU(12," \xa0\xa0Agregar Nuevo"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",10),e.TgZ(14,"div",11),e.TgZ(15,"div",12),e.TgZ(16,"table",13),e.TgZ(17,"thead",14),e.TgZ(18,"tr"),e.TgZ(19,"th",15),e._uU(20,"Nivel"),e.qZA(),e.YNc(21,W,3,3,"ng-container",16),e.TgZ(22,"th"),e.TgZ(23,"button",17),e.NdJ("click",function(){return n.AgregarColumna()}),e._UZ(24,"i",9),e.qZA(),e._uU(25," \xa0\xa0 "),e.TgZ(26,"button",18),e._UZ(27,"i",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"tbody"),e.YNc(29,ie,2,1,"tr",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(30,oe,4,0,"div",20),e.qZA(),e.qZA(),e.qZA(),e._UZ(31,"app-footer"),e.qZA(),e.TgZ(32,"div",21),e.TgZ(33,"div",22),e.TgZ(34,"div",23),e.TgZ(35,"div",24),e.TgZ(36,"h5",25),e._uU(37,"Nuevo porcentaje"),e.qZA(),e._UZ(38,"button",26),e.qZA(),e.TgZ(39,"div",27),e.YNc(40,se,3,3,"ng-container",16),e.qZA(),e.TgZ(41,"div",28),e.TgZ(42,"button",29),e._uU(43,"Salir"),e.qZA(),e.TgZ(44,"button",30),e.NdJ("click",function(){return n.Guardarnuevacomision()}),e._uU(45,"Guardar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",31),e.TgZ(47,"div",22),e.TgZ(48,"div",23),e.TgZ(49,"div",24),e.TgZ(50,"h5",25),e._uU(51,"Nombre del nuevo nivel"),e.qZA(),e._UZ(52,"button",26),e.qZA(),e.TgZ(53,"div",32),e.TgZ(54,"div",33),e.TgZ(55,"input",34),e.NdJ("ngModelChange",function(r){return n.NivelNuevo=r}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(56,"div",28),e.TgZ(57,"button",35),e._uU(58,"Salir"),e.qZA(),e.TgZ(59,"button",36),e.NdJ("click",function(){return n.NuevoNivelfuncion()}),e._uU(60,"Guardar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(61,"div",37),e.TgZ(62,"div",22),e.TgZ(63,"div",23),e.TgZ(64,"div",24),e.TgZ(65,"h5",25),e._uU(66),e.qZA(),e._UZ(67,"button",26),e.qZA(),e.TgZ(68,"div",32),e.TgZ(69,"div",33),e.TgZ(70,"input",34),e.NdJ("ngModelChange",function(r){return n.nombrenivel=r}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(71,"div",28),e.TgZ(72,"button",38),e._uU(73,"Salir"),e.qZA(),e.TgZ(74,"button",36),e.NdJ("click",function(){return n.EditarNombre()}),e._uU(75,"Guardar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(76,"div",39),e.TgZ(77,"div",22),e.TgZ(78,"div",23),e.TgZ(79,"div",24),e.TgZ(80,"h5",25),e._uU(81,"Columnas"),e.qZA(),e._UZ(82,"button",26),e.qZA(),e.TgZ(83,"div",32),e.YNc(84,ce,3,3,"ng-container",16),e.qZA(),e.TgZ(85,"div",28),e.TgZ(86,"button",40),e._uU(87,"Salir"),e.qZA(),e.TgZ(88,"button",36),e.NdJ("click",function(){return n.EliminarColumna()}),e._uU(89,"Guardar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(9,de,n.app.sidebarState,!n.app.sidebarState)),e.xp6(21),e.Q6J("ngForOf",n.comisiones),e.xp6(8),e.Q6J("ngForOf",n.comisiones),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(10),e.Q6J("ngForOf",n.comisiones),e.xp6(15),e.Q6J("ngModel",n.NivelNuevo),e.xp6(11),e.hij("Editar Nombre - ",n.nombrenivel," "),e.xp6(4),e.Q6J("ngModel",n.nombrenivel),e.xp6(14),e.Q6J("ngForOf",n.comisiones))},directives:[p.mk,p.sg,p.O5,N.c,c._Y,c.JL,c.F,c.Fj,c.JJ,c.On],pipes:[p.Nd],styles:[".botonagregar[_ngcontent-%COMP%]{width:3vw;border-radius:100%;height:6vh}.flex[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;flex-direction:row;align-items:flex-end;justify-content:center}.padding-0[_ngcontent-%COMP%]{padding:0!important}.margin[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:4px}"]}),i})();const me=[{path:"perfil",component:U,canActivate:[x.f],data:{grant:2}},{path:"usuario",component:_,canActivate:[x.f],data:{grant:3}},{path:"editarusuario/:id",component:J,canActivate:[x.f],data:{grant:3}},{path:"editarperfil/:id",component:R,canActivate:[x.f],data:{grant:2}},{path:"editarcomisones/:id",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-editar-comisiones"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"editar-comisiones works!"),e.qZA())},styles:[""]}),i})(),canActivate:[x.f],data:{grant:43}},{path:"comisiones",component:ge,canActivate:[x.f],data:{grant:43}}];let _e=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[v.Bz.forChild(me)],v.Bz]}),i})();var he=l(6154);let fe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,_e,A.K,he.SharedModule,c.u5]]}),i})()},6154:(k,T,l)=>{l.r(T),l.d(T,{SharedModule:()=>N});var A=l(9808),p=l(780),C=l(2654),s=l(9863),d=l(7556),e=l(4383),g=l(4182);const u=[{path:"",component:(()=>{class m{constructor(_,v,y){this.auth=_,this.router=v,this.toast=y,this.loginData={Correo:null,Pwd:null},this.subscription=new C.w}ngOnInit(){}ngOnDestroy(){}login(){console.log(this.loginData),null!==this.loginData.Correo&&null!==this.loginData.Pwd&&this.subscription.add(this.auth.login(this.loginData).subscribe(_=>{console.log(_),_.token?(this.auth.user=_.persona,this.auth.logged=!0,localStorage.setItem("auth_token",_.token),localStorage.setItem("user_data",JSON.stringify(_.persona)),this.router.navigateByUrl("/")):this.toast.error("Verifica tus datos","Acceso denegado",{timeOut:3e3})},_=>{console.log(_)}))}}return m.\u0275fac=function(_){return new(_||m)(s.Y36(d.e),s.Y36(p.F0),s.Y36(e._W))},m.\u0275cmp=s.Xpm({type:m,selectors:[["app-login"]],decls:27,vars:2,consts:[[1,"container-fluid","p-h-0","p-v-20","bg","full-height","d-flex",2,"background-image","url('assets/img/fondo.jpg')","background-size","cover"],[1,"d-flex","flex-column","justify-content-between","w-100"],[1,"container","d-flex","h-100",2,"justify-content","center"],[1,"row","align-items-center","w-100","formul"],[1,"card","shadow-lg"],[1,"card-body"],[1,"d-flex","align-items-center","flex-column","ustify-content-between","m-b-30"],["width","50%","alt","","src","assets/img/x-logo.png",1,"img-fluid"],[1,"m-b-0"],["name","login","id","login"],[1,"form-group"],["for","userName",1,"font-weight-semibold"],[1,"input-affix"],[1,"prefix-icon","anticon","anticon-user"],["type","text","id","correo","name","correo","placeholder","Correo","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","password",1,"font-weight-semibold"],[1,"input-affix","m-b-10"],[1,"prefix-icon","anticon","anticon-lock"],["type","password","id","password","name","password","placeholder","Contrase\xf1a","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","mt-2"],[1,"d-flex","align-items-center","justify-content-end"],["id","form-send",1,"btn",2,"background-color","#d38842","color","white",3,"click"]],template:function(_,v){1&_&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"div",5),s.TgZ(6,"div",6),s._UZ(7,"img",7),s.TgZ(8,"h2",8),s._uU(9,"Login"),s.qZA(),s.qZA(),s.TgZ(10,"form",9),s.TgZ(11,"div",10),s.TgZ(12,"label",11),s._uU(13,"Correo:"),s.qZA(),s.TgZ(14,"div",12),s._UZ(15,"i",13),s.TgZ(16,"input",14),s.NdJ("ngModelChange",function(U){return v.loginData.Correo=U}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(17,"div",10),s.TgZ(18,"label",15),s._uU(19,"Contrase\xf1a:"),s.qZA(),s.TgZ(20,"div",16),s._UZ(21,"i",17),s.TgZ(22,"input",18),s.NdJ("ngModelChange",function(U){return v.loginData.Pwd=U}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(23,"div",19),s.TgZ(24,"div",20),s.TgZ(25,"button",21),s.NdJ("click",function(){return v.login()}),s._uU(26,"Entrar"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&_&&(s.xp6(16),s.Q6J("ngModel",v.loginData.Correo),s.xp6(6),s.Q6J("ngModel",v.loginData.Pwd))},directives:[g._Y,g.JL,g.F,g.Fj,g.Q7,g.JJ,g.On],styles:[".bg[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:cover;background-position:center center}.full-height[_ngcontent-%COMP%]{min-height:100vh}.container-fluid[_ngcontent-%COMP%]{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.p-v-20[_ngcontent-%COMP%]{padding-top:20px!important;padding-bottom:20px!important}.p-h-0[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}.w-100[_ngcontent-%COMP%]{width:100%!important}.flex-column[_ngcontent-%COMP%]{flex-direction:column!important}.h-100[_ngcontent-%COMP%]{height:100%!important}.d-flex[_ngcontent-%COMP%]{display:flex!important}.p-h-40[_ngcontent-%COMP%]{padding-left:40px!important;padding-right:40px!important}.justify-content-between[_ngcontent-%COMP%]{justify-content:space-between!important}.formul[_ngcontent-%COMP%]{max-width:500px}.m-b-30[_ngcontent-%COMP%]{margin-bottom:30px!important}.font-weight-semibold[_ngcontent-%COMP%]{font-weight:500!important}label[_ngcontent-%COMP%]{display:inline-block;margin-bottom:.5rem}"]}),m})()}];let b=(()=>{class m{}return m.\u0275fac=function(_){return new(_||m)},m.\u0275mod=s.oAB({type:m}),m.\u0275inj=s.cJS({imports:[[p.Bz.forChild(u)],p.Bz]}),m})();var f=l(1066),E=l(7322),c=l(508),I=l(7531);let N=(()=>{class m{}return m.\u0275fac=function(_){return new(_||m)},m.\u0275mod=s.oAB({type:m}),m.\u0275inj=s.cJS({imports:[[A.ez,b,g.u5,f.FA,E.lN,c.XK,I.c,g.u5,g.UX]]}),m})()},5861:(k,T,l)=>{function A(C,s,d,e,g,Z,u){try{var b=C[Z](u),f=b.value}catch(E){return void d(E)}b.done?s(f):Promise.resolve(f).then(e,g)}function p(C){return function(){var s=this,d=arguments;return new Promise(function(e,g){var Z=C.apply(s,d);function u(f){A(Z,e,g,u,b,"next",f)}function b(f){A(Z,e,g,u,b,"throw",f)}u(void 0)})}}l.d(T,{Z:()=>p})}}]);