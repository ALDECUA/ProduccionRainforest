"use strict";(self.webpackChunkproyectoprueba=self.webpackChunkproyectoprueba||[]).push([[456],{6878:(T,Z,r)=>{r.d(Z,{f:()=>f});var g=r(5861),d=r(9863),_=r(7556),h=r(4383),e=r(780);let f=(()=>{class p{constructor(m,u,l){this.auth=m,this.toast=u,this.router=l}canActivate(m){let u=m.data.grant;return 0===this.auth.menus.length?this.getMenus(u):!!this.auth.menus.includes(u)||(this.toast.error("No tienes permiso para realizar esta acci\xf3n","Acceso denegado"),this.router.navigateByUrl("/crm"),!1)}getMenus(m){return(0,g.Z)(function*(){return console.log("enmenu"),new Promise((u,l)=>{u(!0)})})()}}return p.\u0275fac=function(m){return new(m||p)(d.LFG(_.e),d.LFG(h._W),d.LFG(e.F0))},p.\u0275prov=d.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},1009:(T,Z,r)=>{r.d(Z,{c:()=>_});var g=r(9863),d=r(6475);let _=(()=>{class h{constructor(f){this.app=f}ngOnInit(){}}return h.\u0275fac=function(f){return new(f||h)(g.Y36(d.z))},h.\u0275cmp=g.Xpm({type:h,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"footer"],[1,"footer-content"],[1,"mb-0"]],template:function(f,p){1&f&&(g.TgZ(0,"footer",0),g.TgZ(1,"div",1),g._UZ(2,"p",2),g.qZA(),g.qZA())},styles:[""]}),h})()},6456:(T,Z,r)=>{r.r(Z),r.d(Z,{ContratosModule:()=>V});var g=r(6215),d=r(9808),_=r(780),h=r(6878),e=r(9863);let f=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-bancos"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"bancos works!"),e.qZA())},styles:[""]}),a})();var p=r(6475),b=r(8835),m=r(7556),u=r(4383),l=r(4182);let A=(()=>{class a{constructor(t,n){this.desarrollos=t,this.toast=n,this.saving=!1,this.empresa={},this.onSaveEmpresa=new e.vpe}ngOnInit(){}guardarEmpresa(){this.saving=!1,console.log(this.empresa),this.desarrollos.createEmpresa(this.empresa).subscribe(t=>{console.log(t),!0===t.created&&(this.empresa={},this.toast.success("","Se guardo la empresa!",{timeOut:3e3}),this.onSaveEmpresa.emit(t.data))})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(b.W),e.Y36(u._W))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-empresa"]],outputs:{onSaveEmpresa:"onSaveEmpresa"},decls:29,vars:5,consts:[[1,"row","align-items-center","mb-3"],["for","dinputrazonssa",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["type","text","id","dinputrazonssa",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],["for","fapoderados",1,"col-sm-3","col-form-label"],["type","text","id","fapoderados",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],["for","mandatarioss",1,"col-sm-3","col-form-label"],["type","text","id","mandatarioss",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"form-floating","mt-2"],["placeholder","Leave a comment here","id","floatingTextarea2",1,"form-control",2,"height","150px",3,"ngModel","ngModelChange"],["for","floatingTextarea2"],[1,"mt-2",2,"width","100%","display","flex","justify-content","flex-end"],[1,"btn","btn-outline-success","me-1",3,"disabled","click"],[1,"far","fa-save"],["data-bs-toggle","collapse","href","#empresaCrear","role","button","aria-expanded","false","aria-controls","empresaCrear",1,"btn","btn-outline-danger"],[1,"fa","fa-times"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"label",1),e.TgZ(2,"b"),e._uU(3,"Razon social"),e.qZA(),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"input",3),e.NdJ("ngModelChange",function(s){return n.empresa.RazonSocial=s}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",0),e.TgZ(7,"label",4),e.TgZ(8,"b"),e._uU(9,"Apoderado legal"),e.qZA(),e.qZA(),e.TgZ(10,"div",2),e.TgZ(11,"input",5),e.NdJ("ngModelChange",function(s){return n.empresa.Apoderado=s}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",0),e.TgZ(13,"label",6),e.TgZ(14,"b"),e._uU(15,"Mandatario"),e.qZA(),e.qZA(),e.TgZ(16,"div",2),e.TgZ(17,"input",7),e.NdJ("ngModelChange",function(s){return n.empresa.Mandatario=s}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",8),e.TgZ(19,"textarea",9),e.NdJ("ngModelChange",function(s){return n.empresa.GeneralesApoderado=s}),e.qZA(),e.TgZ(20,"label",10),e._uU(21,"Apoderado General"),e.qZA(),e.qZA(),e.TgZ(22,"div",11),e.TgZ(23,"button",12),e.NdJ("click",function(){return n.guardarEmpresa()}),e._UZ(24,"i",13),e._uU(25," \xa0 Guardar "),e.qZA(),e.TgZ(26,"button",14),e._UZ(27,"i",15),e._uU(28," Cerrar"),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("ngModel",n.empresa.RazonSocial),e.xp6(6),e.Q6J("ngModel",n.empresa.Apoderado),e.xp6(6),e.Q6J("ngModel",n.empresa.Mandatario),e.xp6(2),e.Q6J("ngModel",n.empresa.GeneralesApoderado),e.xp6(4),e.Q6J("disabled",n.saving))},directives:[l.Fj,l.JJ,l.On],styles:[""]}),a})();var y=r(1009);function q(a,o){if(1&a&&(e.TgZ(0,"a",17),e._uU(1),e.qZA()),2&a){const t=o.$implicit;e.MGl("id","list-home-list",t.IdEmpresaDes,""),e.MGl("href","#list-home",t.IdEmpresaDes,"",e.LSH),e.xp6(1),e.Oqu(t.RazonSocial)}}function O(a,o){1&a&&(e.TgZ(0,"div",18),e.TgZ(1,"div",19),e.TgZ(2,"span",20),e._uU(3,"Loading..."),e.qZA(),e.qZA(),e.qZA())}function w(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.editable=!0}),e._UZ(1,"i",33),e.qZA()}}function U(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw().editarEmpresa(i)}),e._UZ(1,"i",35),e._uU(2," \xa0 Guardar "),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",t.saving)}}function S(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.editable=!1}),e._UZ(1,"i",36),e.qZA()}}function I(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",21),e.TgZ(1,"div",6),e.TgZ(2,"div",22),e.TgZ(3,"label",23),e.TgZ(4,"b"),e._uU(5,"Razon social"),e.qZA(),e.qZA(),e.TgZ(6,"div",24),e.TgZ(7,"input",25),e.NdJ("ngModelChange",function(i){return e.CHM(t).$implicit.RazonSocial=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",22),e.TgZ(9,"label",23),e.TgZ(10,"b"),e._uU(11,"Apoderado legal"),e.qZA(),e.qZA(),e.TgZ(12,"div",24),e.TgZ(13,"input",25),e.NdJ("ngModelChange",function(i){return e.CHM(t).$implicit.Apoderado=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",22),e.TgZ(15,"label",23),e.TgZ(16,"b"),e._uU(17,"Mandatario"),e.qZA(),e.qZA(),e.TgZ(18,"div",24),e.TgZ(19,"input",25),e.NdJ("ngModelChange",function(i){return e.CHM(t).$implicit.Mandatario=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",26),e.TgZ(21,"textarea",27),e.NdJ("ngModelChange",function(i){return e.CHM(t).$implicit.GeneralesApoderado=i}),e.qZA(),e.TgZ(22,"label",28),e._uU(23,"Apoderado General"),e.qZA(),e.qZA(),e.TgZ(24,"div",29),e.YNc(25,w,2,0,"button",30),e.YNc(26,U,3,1,"button",31),e.YNc(27,S,2,0,"button",30),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=o.$implicit;e.MGl("id","list-home",t.IdEmpresaDes,""),e.uIk("aria-labelledby","list-home-list"+t.IdEmpresaDes),e.xp6(3),e.MGl("for","inputrazons",t.IdEmpresaDes,""),e.xp6(4),e.MGl("id","inputrazons",t.IdEmpresaDes,""),e.Q6J("ngModel",t.RazonSocial)("disabled",!t.editable),e.xp6(2),e.MGl("for","apoderado",t.IdEmpresaDes,""),e.xp6(4),e.MGl("id","apoderado",t.IdEmpresaDes,""),e.Q6J("ngModel",t.Apoderado)("disabled",!t.editable),e.xp6(2),e.MGl("for","mandatario",t.IdEmpresaDes,""),e.xp6(4),e.MGl("id","mandatario",t.IdEmpresaDes,""),e.Q6J("ngModel",t.Mandatario)("disabled",!t.editable),e.xp6(2),e.Q6J("ngModel",t.GeneralesApoderado)("disabled",!t.editable),e.xp6(4),e.Q6J("ngIf",!t.editable),e.xp6(1),e.Q6J("ngIf",t.editable&&void 0!==t.editable),e.xp6(1),e.Q6J("ngIf",t.editable)}}const k=function(a,o){return{sidebar_is_full:a,sidebar_is_small:o}};let J=(()=>{class a{constructor(t,n,i,s){this.app=t,this.desarrollos=n,this.auth=i,this.toast=s,this.empresas=[],this.saving=!1,this.isLoading=!1,this.app.currentModule="Contratos",this.app.currentSection="- Empresas"}ngOnInit(){this.isLoading=!0,this.desarrollos.getEmpresas().toPromise().then(t=>{t.unauthorized&&(alert("Su sesi\xf3n no es valida, posiblemente haya caducado"),this.auth.logout()),console.log(t),t.error||(this.empresas=t.empresas,this.isLoading=!1)})}editarEmpresa(t){this.saving=!0,this.desarrollos.updateEmpresa(t).subscribe(n=>{n.updated&&this.toast.success("","Cambios guardados!",{timeOut:2e3}),this.saving=!1})}pushEmpresa(t){this.empresas.push(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(p.z),e.Y36(b.W),e.Y36(m.e),e.Y36(u._W))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-empresas"]],decls:25,vars:7,consts:[[1,"page-container",3,"ngClass"],[1,"main-content","container"],[1,"text-end"],["data-bs-toggle","collapse","href","#empresaCrear","role","button","aria-expanded","false","aria-controls","empresaCrear",1,"btn","btn-outline-primary"],[1,"fa","fa-plus"],["id","empresaCrear",1,"collapse","mt-3"],[1,"card"],[3,"onSaveEmpresa"],[1,"row","mt-4"],[1,"col-md-4","border","container","p-4"],[1,"row"],["id","list-tab","role","tablist",1,"list-group"],["class","list-group-item list-group-item-action","data-bs-toggle","list","role","tab","aria-controls","list-home",3,"id","href",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"col-md-8","border","container","p-4"],["id","nav-tabContent",1,"tab-content"],["class","tab-pane fade","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["data-bs-toggle","list","role","tab","aria-controls","list-home",1,"list-group-item","list-group-item-action",3,"id","href"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["role","tabpanel",1,"tab-pane","fade",3,"id"],[1,"row","align-items-center","mb-3"],[1,"col-sm-3","col-form-label",3,"for"],[1,"col-sm-9"],["type","text",1,"form-control",2,"width","300px",3,"id","ngModel","disabled","ngModelChange"],[1,"form-floating","mt-2"],["placeholder","Leave a comment here","id","floatingTextarea2",1,"form-control",2,"height","150px",3,"ngModel","disabled","ngModelChange"],["for","floatingTextarea2"],[1,"mt-2",2,"width","100%","display","flex","justify-content","flex-end"],["class","btn btn-outline-info",3,"click",4,"ngIf"],["class","btn btn-outline-success me-1",3,"disabled","click",4,"ngIf"],[1,"btn","btn-outline-info",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-outline-success","me-1",3,"disabled","click"],[1,"far","fa-save"],[1,"far","fa-eye"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e._UZ(4,"i",4),e._uU(5," Agregar empresa"),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"app-add-empresa",7),e.NdJ("onSaveEmpresa",function(s){return n.pushEmpresa(s)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"h5"),e._uU(12,"Lista de empresas"),e.qZA(),e._UZ(13,"br"),e.TgZ(14,"div",10),e.TgZ(15,"div",11),e.YNc(16,q,2,3,"a",12),e.YNc(17,O,4,0,"div",13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",14),e.TgZ(19,"h5"),e._uU(20,"Informaci\xf3n de la empresa"),e.qZA(),e._UZ(21,"br"),e.TgZ(22,"div",15),e.YNc(23,I,28,19,"div",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(24,"app-footer"),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(4,k,n.app.sidebarState,!n.app.sidebarState)),e.xp6(16),e.Q6J("ngForOf",n.empresas),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(6),e.Q6J("ngForOf",n.empresas))},directives:[d.mk,A,d.sg,d.O5,l.Fj,l.JJ,l.On,y.c],styles:[""]}),a})();var v,M=r(5861),P=r(6170),N=r.n(P),D=r(5226),C=r.n(D);function E(a,o){a.onload=function(){this.onerror=this.onload=null,o(null,a)},a.onerror=function(){this.onerror=this.onload=null,o(new Error("Failed to load "+this.src),a)}}function z(a,o){a.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,o(null,a))}}function x(a,o){return"CKEDITOR"in window?Promise.resolve(CKEDITOR):"string"!=typeof a||a.length<1?Promise.reject(new TypeError("CKEditor URL must be a non-empty string.")):(v||(v=x.scriptLoader(a).then(function(t){return o&&o(t),t})),v)}function B(a,o){}x.scriptLoader=function(a){return new Promise(function(o,t){!function(a,o,t){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");"function"==typeof o&&(t=o,o={}),t=t||function(){},i.type=(o=o||{}).type||"text/javascript",i.charset=o.charset||"utf8",i.async=!("async"in o)||!!o.async,i.src=a,o.attrs&&function(a,o){for(var t in o)a.setAttribute(t,o[t])}(i,o.attrs),o.text&&(i.text=String(o.text)),("onload"in i?E:z)(i,t),i.onload||E(i,t),n.appendChild(i)}(a,function(n){return v=void 0,n?t(n):window.CKEDITOR?void o(CKEDITOR):t(new Error("Script loaded from editorUrl doesn't provide CKEDITOR namespace."))})})};let G=(()=>{class a{constructor(t,n){this.elementRef=t,this.ngZone=n,this.editorUrl="https://cdn.ckeditor.com/4.16.2/standard-all/ckeditor.js",this.tagName="textarea",this.type="classic",this.namespaceLoaded=new e.vpe,this.ready=new e.vpe,this.dataReady=new e.vpe,this.change=new e.vpe,this.dataChange=new e.vpe,this.dragStart=new e.vpe,this.dragEnd=new e.vpe,this.drop=new e.vpe,this.fileUploadResponse=new e.vpe,this.fileUploadRequest=new e.vpe,this.focus=new e.vpe,this.paste=new e.vpe,this.afterPaste=new e.vpe,this.blur=new e.vpe,this._readOnly=null,this._data=null,this._destroyed=!1}set data(t){if(t!==this._data){if(this.instance)return this.instance.setData(t),void(this._data=this.instance.getData());this._data=t}}get data(){return this._data}set readOnly(t){this.instance?this.instance.setReadOnly(t):this._readOnly=t}get readOnly(){return this.instance?this.instance.readOnly:this._readOnly}ngAfterViewInit(){x(this.editorUrl,t=>{this.namespaceLoaded.emit(t)}).then(()=>{this._destroyed||this.ngZone.runOutsideAngular(this.createEditor.bind(this))}).catch(window.console.error)}ngOnDestroy(){this._destroyed=!0,this.ngZone.runOutsideAngular(()=>{this.instance&&(this.instance.destroy(),this.instance=null)})}writeValue(t){this.data=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}createEditor(){const t=document.createElement(this.tagName);this.elementRef.nativeElement.appendChild(t);const n="inline"===this.type?CKEDITOR.inline(t,this.config):CKEDITOR.replace(t,this.config);n.once("instanceReady",i=>{this.instance=n,this.readOnly=null!==this._readOnly?this._readOnly:this.instance.readOnly,this.subscribe(this.instance);const s=n.undoManager;null!==this.data?(s&&s.lock(),n.setData(this.data,{callback:()=>{this.data!==n.getData()&&n.fire(s?"change":"dataReady"),s&&s.unlock(),this.ngZone.run(()=>{this.ready.emit(i)})}})):this.ngZone.run(()=>{this.ready.emit(i)})})}subscribe(t){t.on("focus",n=>{this.ngZone.run(()=>{this.focus.emit(n)})}),t.on("paste",n=>{this.ngZone.run(()=>{this.paste.emit(n)})}),t.on("afterPaste",n=>{this.ngZone.run(()=>{this.afterPaste.emit(n)})}),t.on("dragend",n=>{this.ngZone.run(()=>{this.dragEnd.emit(n)})}),t.on("dragstart",n=>{this.ngZone.run(()=>{this.dragStart.emit(n)})}),t.on("drop",n=>{this.ngZone.run(()=>{this.drop.emit(n)})}),t.on("fileUploadRequest",n=>{this.ngZone.run(()=>{this.fileUploadRequest.emit(n)})}),t.on("fileUploadResponse",n=>{this.ngZone.run(()=>{this.fileUploadResponse.emit(n)})}),t.on("blur",n=>{this.ngZone.run(()=>{this.onTouched&&this.onTouched(),this.blur.emit(n)})}),t.on("dataReady",this.propagateChange,this),t.on(this.instance.undoManager?"change":"selectionCheck",this.propagateChange,this)}propagateChange(t){this.ngZone.run(()=>{const n=this.instance.getData();"change"===t.name?this.change.emit(t):"dataReady"===t.name&&this.dataReady.emit(t),n!==this.data&&(this._data=n,this.dataChange.emit(n),this.onChange&&this.onChange(n))})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(e.SBq),e.Y36(e.R0b))},a.\u0275cmp=e.Xpm({type:a,selectors:[["ckeditor"]],inputs:{editorUrl:"editorUrl",tagName:"tagName",type:"type",data:"data",readOnly:"readOnly",config:"config"},outputs:{namespaceLoaded:"namespaceLoaded",ready:"ready",dataReady:"dataReady",change:"change",dataChange:"dataChange",dragStart:"dragStart",dragEnd:"dragEnd",drop:"drop",fileUploadResponse:"fileUploadResponse",fileUploadRequest:"fileUploadRequest",focus:"focus",paste:"paste",afterPaste:"afterPaste",blur:"blur"},features:[e._Bn([{provide:l.JU,useExisting:(0,e.Gpc)(()=>a),multi:!0}])],decls:1,vars:0,template:function(t,n){1&t&&e.YNc(0,B,0,0,"ng-template")},encapsulation:2}),a})(),L=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[l.u5,d.ez]]}),a})();function Q(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"tr",45),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().seleccionarContrato(s)}),e.TgZ(1,"th",46),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"th"),e.TgZ(8,"button",47),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().previsualizarMachote(s.IdContrato)}),e._UZ(9,"i",44),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=o.$implicit,n=o.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.hij(" ",t.Nombre," "),e.xp6(2),e.Oqu(t.fch_upd||t.fch_add)}}function K(a,o){1&a&&(e.TgZ(0,"div",48),e.TgZ(1,"div",49),e.TgZ(2,"span",50),e._uU(3,"Loading..."),e.qZA(),e.qZA(),e.qZA())}function Y(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"li",20),e.TgZ(1,"button",51),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().seleccionarCelda(s)}),e._uU(2),e.qZA(),e.qZA()}if(2&a){const t=o.$implicit;e.xp6(1),e.Q6J("id","pills_celda_tab"+t.IdCelda),e.uIk("data-bs-target","#pills_celda"+t.IdCelda)("aria-controls","pills_celda"+t.IdCelda),e.xp6(1),e.Oqu(t.NombreCelda)}}function j(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",52),e.TgZ(1,"div",53),e.TgZ(2,"span",54),e.NdJ("click",function(){return e.CHM(t),e.oxw().copiarIdentificadorCelda()}),e._uU(3,"Identificador para machote: "),e.TgZ(4,"strong"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"button",55),e.NdJ("click",function(){return e.CHM(t),e.oxw().eliminarCeldaSeleccionada()}),e._uU(7," Eliminar celda "),e.qZA(),e.qZA(),e._UZ(8,"br"),e._UZ(9,"br"),e.TgZ(10,"ckeditor",28),e.NdJ("change",function(i){return e.CHM(t),e.oxw().onChangeCelda(i)}),e.qZA(),e.qZA()}if(2&a){const t=o.$implicit,n=e.oxw();e.MGl("id","pills_celda",t.IdCelda,""),e.uIk("aria-labelledby","pills_celda_tab"+t.IdCelda),e.xp6(5),e.Oqu(t.Identificador),e.xp6(5),e.s9C("data",t.ContenidoCelda),e.Q6J("config",n.editorCOnfig)}}const H=function(a,o){return{sidebar_is_full:a,sidebar_is_small:o}},$=[{path:"empresas",component:J,canActivate:[h.f],data:{grant:5}},{path:"bancos",component:f},{path:"machotes",component:(()=>{class a{constructor(t,n,i,s){this.app=t,this.desarrollos=n,this.auth=i,this.toast=s,this.contratos=[],this.saving=!1,this.test=N(),this.buttonAction=!1,this.editorCOnfig={},this.config={language:"es",additionalLanguages:"all"},this.isLoading=!1,this.isLoadingMachote=!1,this.listaDeCeldas=[],this.machoteSeleccionado=null,this.celdaSeleccionada=null,this.app.currentModule="Contratos",this.app.currentSection="- Machotes"}ngOnInit(){this.isLoading=!0,this.desarrollos.getContratos().toPromise().then(t=>{t.unauthorized&&(alert("Su sesi\xf3n no es valida, posiblemente haya caducado"),this.auth.logout()),t.error||(console.log(t.contratos),this.contratos=t.contratos,this.isLoading=!1)})}ngAfterViewInit(){var t=document.getElementById("offcanvasExample");this.canvasModal=new bootstrap.Offcanvas(t)}editarContrato(t,n=null){this.saving=!0,t.Titulo=n,this.desarrollos.updateContrato(t).subscribe(i=>{this.buttonAction=!1,console.log(i),i.updated&&this.toast.success("","Cambios guardados!",{timeOut:2e3}),this.saving=!1})}onChange({editor:t},n,i="Machote"){console.log("xxx");const s=t.getData();this.contratos[n][i]=s}onChangeEditor(t,n="Machote"){this.machoteSeleccionado[n]=t.editor.getData()}onChangeCelda(t){this.celdaSeleccionada.ContenidoCelda=t.editor.getData()}openPDF(t){this.desarrollos.verPdfContrato(t)}pushMachote(t){this.contratos.push(t)}onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())}seleccionarContrato(t){this.machoteSeleccionado=t,this.celdaSeleccionada=null,this.canvasModal.show(),this.listaDeCeldas=[],this.desarrollos.obtenerCeldas(this.machoteSeleccionado.IdContrato).subscribe(n=>{!0!==n.error&&(document.getElementById("pills-home-tab").click(),this.listaDeCeldas=n)})}save(){this.buttonAction=!0,null!==this.celdaSeleccionada?this.actualizarCeldaSeleccionada():(console.log(this.celdaSeleccionada,"ELSE"),this.editarContrato(this.machoteSeleccionado))}saveAll(){this.editarContrato(this.machoteSeleccionado),this.listaDeCeldas.forEach(t=>{this.desarrollos.actualizarCelda(t).subscribe(n=>{1===n.Updated&&(this.toast.info("La celda "+t.NombreCelda+" fue actualizada",t.NombreCelda+" se guardo!",{timeOut:3e3,positionClass:"toast-top-left"}),this.buttonAction=!1)})})}saveAndClose(){this.buttonAction=!0,null!==this.celdaSeleccionada?this.actualizarCeldaSeleccionada():this.editarContrato(this.machoteSeleccionado),this.canvasModal.hide()}saveAs(){var t=this;return(0,M.Z)(function*(){document.getElementById("offcanvasExample").removeAttribute("tabindex");const{value:n}=yield C().fire({title:"Guardar como:",input:"text",inputPlaceholder:"Escribe un nombre",showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar"});n&&(console.log(n),t.celdaSeleccionada?(t.celdaSeleccionada.NombreCelda=n,t.actualizarCeldaSeleccionada()):(t.machoteSeleccionado.Nombre=n,t.editarContrato(t.machoteSeleccionado,n)),t.canvasModal.hide())})()}iniciarDocumento(){var t=this;return(0,M.Z)(function*(){const{value:n}=yield C().fire({title:"Crear documento:",input:"text",inputPlaceholder:"Escribe un nombre",showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar"});n&&t.desarrollos.crearContrato({Nombre:n}).subscribe(i=>{console.log(i),i.insert?(t.machoteSeleccionado=i.record,t.canvasModal.show()):t.toast.error("No se creo el documento","Intente nuevamente o contacte a soporte")})})()}anadirCelda(){var t=this;return(0,M.Z)(function*(){document.getElementById("offcanvasExample").removeAttribute("tabindex");const{value:n}=yield C().fire({title:"Agregar una celda",html:'<input id="nombrecelda" class="swal2-input" placeholder="Nombre, ejemplo: Clausula 1">\n          <select id="tipocelda" class="swal2-select">\n          <option value="0" disabled>Tipo de celda</option>\n          <option value="1" selected>Clausula</option>\n          <option value="2">Generales</option>\n          <option value="3">Chepina</option>\n          </select>\n        ',focusConfirm:!1,preConfirm:()=>({NombreCelda:document.getElementById("nombrecelda").value,TipoCelda:document.getElementById("tipocelda").value})});if(n){if([""," ",null,void 0].includes(n.NombreCelda))return;n.IdContrato=t.machoteSeleccionado.IdContrato,n.Identificador="@@"+n.NombreCelda.toLocaleUpperCase().replace(/ /g,"").normalize("NFD").replace(/[\u0300-\u036f]/g,""),console.log(n),t.desarrollos.addCelda(n).subscribe(i=>{console.log(i),1===i.Inserted&&(t.toast.success("","Se a\xf1adio la celda al contrato selecciconado",{timeOut:2e3}),t.desarrollos.obtenerCeldas(t.machoteSeleccionado.IdContrato).subscribe(s=>{!0!==s.error&&(t.listaDeCeldas=s)}))})}})()}seleccionarCelda(t){this.celdaSeleccionada=t}actualizarCeldaSeleccionada(){this.desarrollos.actualizarCelda(this.celdaSeleccionada).subscribe(t=>{1===t.Updated&&(this.toast.success("La celda "+this.celdaSeleccionada.NombreCelda+" fue actualizada","Cambios guardados!",{timeOut:2e3}),this.buttonAction=!1)})}copiarIdentificadorCelda(){navigator.clipboard.writeText(this.celdaSeleccionada.Identificador),this.toast.success("","Texo copiado en el portapapeles",{timeOut:1e3,positionClass:"toast-top-left"})}eliminarCeldaSeleccionada(){const t=C().mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});t.fire({title:"\xbfEstas segur@?",text:"La celda sera eliminada permanentemente",icon:"warning",showCancelButton:!0,confirmButtonText:"SI",cancelButtonText:"No",reverseButtons:!0}).then(n=>{n.isConfirmed&&this.desarrollos.eliminarCelda(this.celdaSeleccionada).subscribe(i=>{const s=this.listaDeCeldas.findIndex(c=>c.IdCelda===this.celdaSeleccionada.IdCelda);this.listaDeCeldas.splice(s,1),t.fire("Eliminado!","","success")})})}previsualizarMachote(t){window.open("https://crm-fx.herokuapp.com/contratos/obtener/pdf/"+t,"blank")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(p.z),e.Y36(b.W),e.Y36(m.e),e.Y36(u._W))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-machotes"]],decls:87,vars:14,consts:[[1,"page-container",3,"ngClass"],[1,"main-content","container"],[1,"row","mt-4"],[1,"col-md-8","border","container","p-4"],[1,"d-flex","justify-content-between"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"row"],["id","list-tab","role","tablist",1,"list-group"],[1,"table","table-striped","table-hover"],["scope","col"],[3,"click",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],["tabindex","-1","id","offcanvasExample","aria-labelledby","offcanvasExampleLabel",1,"offcanvas","offcanvas-start"],[1,"offcanvas-header"],[1,"pul-heading","pul-heading--h2","pul-drawer__title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","text-reset"],[1,"ms-2","permissions__subtitle"],[1,"pul-icon","pul-icon--size-24"],["src","https://admiring-davinci.74-208-25-239.plesk.page:8443/cp/theme//icons/16/plesk/file-webscript.png?b2aff14c14b05cccbb316c37d48fb591","alt",""],["id","pills-tab","role","tablist",1,"nav","nav-pills"],["role","presentation",1,"nav-item"],["id","pills-home-tab","data-bs-toggle","pill","data-bs-target","#pills-home","type","button","role","tab","aria-controls","pills-home","aria-selected","true",1,"nav-link","ms-2","active",3,"click"],["class","nav-item","role","presentation",4,"ngFor","ngForOf"],["type","button","title","A\xf1adir celda (Clausula, Chepina, Generales)",1,"btn","btn-light",3,"click"],[1,"fas","fa-plus"],[1,"offcanvas-body"],["id","pills-tabContent",1,"tab-content"],["id","pills-home","role","tabpanel","aria-labelledby","pills-home-tab",1,"tab-pane","fade","show","active"],["editorUrl","https://ckeditor.com/latest/ckeditor.js",3,"data","config","change"],["class","tab-pane fade","role","tabpanel",3,"id",4,"ngFor","ngForOf"],[1,"pul-drawer__footer"],[1,"pul-drawer__footer-inner"],[1,"pul-section","pul-form__footer"],[1,"pul-section-item","pul-form-field"],[1,"pul-section-item__title"],[1,"pul-form-field__label"],[1,"pul-section-item__value"],["type","button","data-action","submit",1,"pul-button","pul-button--lg","pul-button--primary","bg-info","text-white",3,"disabled","click"],[1,"pul-button__inner"],["type","button","data-action","submit",1,"pul-button","pul-button--lg","pul-button--primary","bg-primary","text-white",3,"disabled","click"],["type","button","data-action","apply",1,"pul-button","pul-button--lg",3,"disabled","click"],["type","button","data-action","saveAs",1,"pul-button","pul-button--lg",3,"click"],["type","button","data-bs-dismiss","offcanvas",1,"pul-button","pul-button--lg"],[1,"pul-button","pul-button--lg","pul-button--primary","bg-success","text-white",3,"click"],[1,"fas","fa-eye"],[3,"click"],["scope","row"],[1,"btn","btn-outline-primary",3,"click"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["data-bs-toggle","pill","type","button","role","tab","aria-selected","true",1,"nav-link",3,"id","click"],["role","tabpanel",1,"tab-pane","fade",3,"id"],[1,"d-flex","justify-content-between","align-content-center"],[2,"cursor","pointer",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h5"),e._uU(6,"Lista de contratos"),e.qZA(),e._UZ(7,"br"),e.TgZ(8,"button",5),e.NdJ("click",function(){return n.iniciarDocumento()}),e._uU(9,"Crear documento"),e.qZA(),e.qZA(),e.TgZ(10,"div",6),e.TgZ(11,"div",7),e.TgZ(12,"table",8),e.TgZ(13,"thead"),e.TgZ(14,"tr"),e.TgZ(15,"th",9),e._uU(16,"#"),e.qZA(),e.TgZ(17,"th",9),e._uU(18,"Nombre documento"),e.qZA(),e.TgZ(19,"th",9),e._uU(20,"Ultima actualizaci\xf3n"),e.qZA(),e._UZ(21,"th"),e.qZA(),e.qZA(),e.TgZ(22,"tbody"),e.YNc(23,Q,10,3,"tr",10),e.qZA(),e.qZA(),e.YNc(24,K,4,0,"div",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(25,"app-footer"),e.qZA(),e.TgZ(26,"div",12),e.TgZ(27,"div",13),e.TgZ(28,"h2",14),e.TgZ(29,"span"),e._uU(30,"Editor de texto"),e.qZA(),e.qZA(),e._UZ(31,"hr"),e._UZ(32,"button",15),e.qZA(),e.TgZ(33,"div",16),e.TgZ(34,"span"),e.TgZ(35,"span",17),e._UZ(36,"img",18),e.qZA(),e.qZA(),e.TgZ(37,"ul",19),e.TgZ(38,"li",20),e.TgZ(39,"button",21),e.NdJ("click",function(){return n.celdaSeleccionada=null}),e._uU(40),e.qZA(),e.qZA(),e.YNc(41,Y,3,4,"li",22),e.qZA(),e.TgZ(42,"button",23),e.NdJ("click",function(){return n.anadirCelda()}),e._UZ(43,"i",24),e.qZA(),e.qZA(),e._UZ(44,"hr"),e.TgZ(45,"div",25),e.TgZ(46,"div",26),e.TgZ(47,"div",27),e.TgZ(48,"ckeditor",28),e.NdJ("change",function(s){return n.onChangeEditor(s)}),e.qZA(),e.qZA(),e.YNc(49,j,11,5,"div",29),e.qZA(),e.qZA(),e.TgZ(50,"footer",30),e.TgZ(51,"div",31),e.TgZ(52,"div",32),e.TgZ(53,"div",33),e.TgZ(54,"div",34),e.TgZ(55,"div",35),e._UZ(56,"label"),e.qZA(),e.qZA(),e.TgZ(57,"div",36),e.TgZ(58,"div"),e.TgZ(59,"button",37),e.NdJ("click",function(){return n.save()}),e.TgZ(60,"span",38),e.TgZ(61,"span"),e.TgZ(62,"span"),e._uU(63,"Guardar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(64,"button",39),e.NdJ("click",function(){return n.saveAll()}),e.TgZ(65,"span",38),e.TgZ(66,"span"),e.TgZ(67,"span"),e._uU(68,"Guardar todo"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"button",40),e.NdJ("click",function(){return n.saveAndClose()}),e.TgZ(70,"span",38),e.TgZ(71,"span"),e.TgZ(72,"span"),e._uU(73,"Guardar y salir"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(74,"button",41),e.NdJ("click",function(){return n.saveAs()}),e.TgZ(75,"span",38),e.TgZ(76,"span"),e.TgZ(77,"span"),e._uU(78,"Guardar como..."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(79,"button",42),e.TgZ(80,"span",38),e.TgZ(81,"span"),e.TgZ(82,"span"),e._uU(83,"Cancelar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(84,"button",43),e.NdJ("click",function(){return n.previsualizarMachote(n.machoteSeleccionado.IdContrato)}),e._uU(85," Previsualizar "),e._UZ(86,"i",44),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(11,H,n.app.sidebarState,!n.app.sidebarState)),e.xp6(23),e.Q6J("ngForOf",n.contratos),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(16),e.Oqu(null==n.machoteSeleccionado?null:n.machoteSeleccionado.Nombre),e.xp6(1),e.Q6J("ngForOf",n.listaDeCeldas),e.xp6(7),e.s9C("data",null==n.machoteSeleccionado?null:n.machoteSeleccionado.Machote),e.Q6J("config",n.editorCOnfig),e.xp6(1),e.Q6J("ngForOf",n.listaDeCeldas),e.xp6(10),e.Q6J("disabled",n.buttonAction),e.xp6(5),e.Q6J("disabled",n.buttonAction),e.xp6(5),e.Q6J("disabled",n.buttonAction))},directives:[d.mk,d.sg,d.O5,y.c,G],styles:[".offcanvas-start[_ngcontent-%COMP%]{width:1200px;max-width:100%;border-top-right-radius:16px;border-bottom-right-radius:16px;box-shadow:2px 0 4px #0000001a}.pul-drawer-header[_ngcontent-%COMP%]   .pul-drawer__title[_ngcontent-%COMP%]{margin-bottom:0;font-size:24px;font-weight:400;line-height:1.333}.pul-drawer-header[_ngcontent-%COMP%]   .pul-drawer__title[_ngcontent-%COMP%] + .pul-drawer__subtitle[_ngcontent-%COMP%]{margin-top:12px}.permissions__subtitle[_ngcontent-%COMP%]{display:flex;align-items:center}.pul-icon--size-24[_ngcontent-%COMP%]{width:24px;height:24px}.pul-drawer__footer[_ngcontent-%COMP%]{padding-left:24px;padding-right:24px;background-color:#fff;text-align:left}.pul-drawer__footer-inner[_ngcontent-%COMP%]{padding-top:16px;padding-bottom:24px;border-top:1px solid #d3d3de}.pul-form__footer[_ngcontent-%COMP%]{margin-bottom:0}.pul-section-item[_ngcontent-%COMP%]:not(.pul-section-item--vertical){display:flex;align-items:baseline}.pul-form-field[_ngcontent-%COMP%]{box-sizing:border-box;min-height:28px}.pul-drawer__footer[_ngcontent-%COMP%]   .pul-section-item[_ngcontent-%COMP%]:not(.pul-section-item--vertical)   .pul-section-item__title[_ngcontent-%COMP%]{order:1;padding-right:0;padding-left:16px;width:auto;text-align:right}.pul-section-item[_ngcontent-%COMP%]:not(.pul-section-item--vertical)   .pul-section-item__value[_ngcontent-%COMP%]{flex:auto}.pul-button--lg[_ngcontent-%COMP%]{min-height:40px;min-width:100px;padding:12px 24px;font-size:14px}.pul-form__footer[_ngcontent-%COMP%]   .pul-button[_ngcontent-%COMP%], .pul-form__footer[_ngcontent-%COMP%]   .pul-form__additional-button[_ngcontent-%COMP%]{margin-right:8px}.pul-button[_ngcontent-%COMP%]{display:inline-block;overflow:visible;box-sizing:border-box;margin:0;cursor:pointer;text-align:center;vertical-align:middle;white-space:nowrap;text-decoration:none;text-transform:none;border:none;border-radius:2px;font:inherit;font-weight:600;line-height:16px;color:#222;background-color:#ececec;box-shadow:inset 0 -1px #0000002e;transition:background-color .2s linear,box-shadow .2s linear,opacity .2s linear}.pul-button__inner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.permissions__subtitle[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#000}.permissions__subtitle[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{color:#fff!important;background-color:#0dcaf0!important}"]}),a})(),canActivate:[h.f],data:{grant:6}}];let X=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[_.Bz.forChild($)],_.Bz]}),a})(),V=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[d.ez,l.u5,X,L,g.K]]}),a})()},5861:(T,Z,r)=>{function g(_,h,e,f,p,b,m){try{var u=_[b](m),l=u.value}catch(A){return void e(A)}u.done?h(l):Promise.resolve(l).then(f,p)}function d(_){return function(){var h=this,e=arguments;return new Promise(function(f,p){var b=_.apply(h,e);function m(l){g(b,f,p,m,u,"next",l)}function u(l){g(b,f,p,m,u,"throw",l)}m(void 0)})}}r.d(Z,{Z:()=>d})}}]);