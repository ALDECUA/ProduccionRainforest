"use strict";(self.webpackChunkproyectoprueba=self.webpackChunkproyectoprueba||[]).push([[11],{4011:(y,T,l)=>{l.r(T),l.d(T,{ContabilidadModule:()=>ye});var d=l(6215),p=l(9808),e=l(9863),_=l(6475),u=l(9855),m=l(1006),U=l(4383),x=l(7556),O=l(6936),C=l(1009);const N=function(n,a){return{sidebar_is_full:n,sidebar_is_small:a}};let J=(()=>{class n{constructor(t,o,i,s,r,f){this.app=t,this.controlcalidad=o,this.contabilidad=i,this.toast=s,this.auth=r,this.controldecalidad=f,this.registro={Nombre:null,Nombre_S:"",Apellido_Pat:null,Apellido_Mat:"",Email:null,Num_Cel:null,Whats:null,asesor:null,Nacimiento:new Date,Fecha:new Date,SocioCom:null,IdLider:null},this.loading=!0,this.registros={aceptados:[],pendientes:[]},this.configDataTable={fields:[{text:"Nombre inversionista",value:"Nombre",hasImage:!1,pipe:null},{text:"Email",value:"Email",hasImage:!1,pipe:null},{text:"Telefono",value:"Telefono",hasImage:!1,pipe:null}],editable:!1,show:!0,urlEdit:"/crm/contabilidad/inversionistas/",urlShow:"/crm/contabilidad/inversionistas/",idField:"IdPersona",fotoField:"Foto_Perfil",filtroA:!1},this.app.currentModule="Contabilidad",this.app.currentSection=" - Control de pagos"}ngOnInit(){this.GetInfo()}GetInfo(){this.controldecalidad.getRegistrosInversionistasPAGOS().subscribe(t=>{this.registros.aceptados=t,this.loading=!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.z),e.Y36(u.V),e.Y36(m.i),e.Y36(U._W),e.Y36(x.e),e.Y36(u.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-pagos"]],decls:4,vars:7,consts:[[1,"page-container",3,"ngClass"],[1,"main-content","position-relative"],[3,"dataList","config","loading"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"app-datatable",2),e.qZA(),e._UZ(3,"app-footer"),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(4,N,o.app.sidebarState,!o.app.sidebarState)),e.xp6(2),e.Q6J("dataList",o.registros.aceptados)("config",o.configDataTable)("loading",o.loading))},directives:[p.mk,O.n,C.c],styles:[".img-cons[_ngcontent-%COMP%]{width:43%}.main-content[_ngcontent-%COMP%]{text-align:center}.disabled[_ngcontent-%COMP%]{pointer-events:none}.bloqueo[_ngcontent-%COMP%]{left:0;right:0;top:0;bottom:0;background-color:gray;opacity:.4}"]}),n})();const L=function(n,a){return{sidebar_is_full:n,sidebar_is_small:a}};let F=(()=>{class n{constructor(t){this.app=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-nomina"]],decls:4,vars:4,consts:[[1,"page-container",3,"ngClass"],[1,"main-content"],["src","assets/img/FX.jpg","alt","",1,"img-cons"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"img",2),e.qZA(),e._UZ(3,"app-footer"),e.qZA()),2&t&&e.Q6J("ngClass",e.WLB(1,L,o.app.sidebarState,!o.app.sidebarState))},directives:[p.mk,C.c],styles:[".img-cons[_ngcontent-%COMP%]{width:43%}.main-content[_ngcontent-%COMP%]{text-align:center}"]}),n})();var A=l(780),c=l(4182),q=l(7322),h=l(1066),P=l(7531);function k(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",18),e.TgZ(1,"input",19),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().buscar=i})("keyup",function(){return e.CHM(t),e.oxw().filtrarPersona()}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.buscar)}}function w(n,a){1&n&&(e.TgZ(0,"div",25),e.TgZ(1,"div",26),e.TgZ(2,"span",27),e._uU(3,"Loading..."),e.qZA(),e.qZA(),e.qZA())}function R(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1," Zenica"),e.qZA())}function Q(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" Etapa ",t.Fase," ")}}function S(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"Contado"),e.qZA())}function z(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.Mensualidades," meses")}}function E(n,a){if(1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.YNc(7,R,2,0,"span",28),e.YNc(8,Q,2,1,"span",28),e._uU(9),e.qZA(),e.TgZ(10,"td"),e.YNc(11,S,2,0,"span",28),e.YNc(12,z,2,1,"span",28),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td",29),e._uU(18),e.qZA(),e.qZA()),2&n){const t=a.$implicit,o=a.index;e.xp6(2),e.Oqu(o+1),e.xp6(2),e.Oqu(t.Inversionista),e.xp6(2),e.hij(" ",t.Desarrollo," "),e.xp6(1),e.Q6J("ngIf",130==t.IdFase),e.xp6(1),e.Q6J("ngIf",130!=t.IdFase),e.xp6(1),e.hij(" ",t.nombre," "),e.xp6(2),e.Q6J("ngIf",0==t.Mensualidades),e.xp6(1),e.Q6J("ngIf",0!=t.Mensualidades),e.xp6(2),e.Oqu(t.Fch),e.xp6(2),e.hij("$",t.Precio_Final,""),e.xp6(2),e.hij("$",t.ComisionPorPagar,"")}}const Y=function(n){return{resaltar:n}},H=function(){return[]},B=function(n,a){return{abierto:n,cerrado:a}};function D(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",20),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().detalles(s)}),e.TgZ(2,"th",21),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.qZA(),e.TgZ(12,"td",22),e.YNc(13,w,4,0,"div",17),e.TgZ(14,"div",23),e.TgZ(15,"table",24),e.TgZ(16,"thead"),e.TgZ(17,"tr"),e.TgZ(18,"th",14),e._uU(19,"#"),e.qZA(),e.TgZ(20,"th",14),e._uU(21,"Inversionista"),e.qZA(),e.TgZ(22,"th",14),e._uU(23,"Lote"),e.qZA(),e.TgZ(24,"th",14),e._uU(25,"Financiamiento"),e.qZA(),e.TgZ(26,"th",14),e._uU(27,"Fecha HR"),e.qZA(),e.TgZ(28,"th",14),e._uU(29,"Precio"),e.qZA(),e.TgZ(30,"th",14),e._uU(31,"Comisi\xf3n por lote"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"tbody"),e.YNc(33,E,19,11,"tr",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit,o=a.index,i=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(9,Y,t.ver)),e.xp6(2),e.Oqu(o+1),e.xp6(2),e.Oqu(t.Nombre_Colaborador),e.xp6(2),e.Oqu(t.Nivel),e.xp6(2),e.hij("$",t.VolumenVenta,""),e.xp6(2),e.hij("$",t.ComisionPorPagar,""),e.xp6(2),e.Q6J("ngIf",t.loading&&i.hrs==e.DdM(11,H)),e.xp6(1),e.Q6J("ngClass",e.WLB(12,B,t.ver,!t.ver)),e.xp6(19),e.Q6J("ngForOf",i.hrs)}}function j(n,a){1&n&&(e.TgZ(0,"label",30),e._uU(1,"Elige un rango de fechas para comenzar"),e.qZA())}function V(n,a){1&n&&(e.TgZ(0,"div",25),e.TgZ(1,"div",26),e.TgZ(2,"span",27),e._uU(3,"Loading..."),e.qZA(),e.qZA(),e.qZA())}function G(n,a){1&n&&(e.TgZ(0,"label",30),e._uU(1,"Sin resultados"),e.qZA())}const W=function(n,a){return{sidebar_is_full:n,sidebar_is_small:a}};let X=(()=>{class n{constructor(t,o,i){this.app=t,this.datepipe=o,this.contabilidad=i,this.dateRange=new c.cw({start:new c.NI,end:new c.NI}),this.hrs=[],this.personas=[],this.fechas={},this.buscar="",this.busqueda=0,this.loading=!1,this.backupPersonas=[]}ngOnInit(){this.contabilidad.getComisiones(this.fechas).subscribe(t=>{this.personas=t.personas})}dateRangeChange(){this.buscar="",this.busqueda++,this.dateRange.value.end&&this.dateRange.value.start&&(this.loading=!0,this.fechas.FechaInicio=this.datepipe.transform(this.dateRange.value.start,"yyyy-MM-dd"),this.fechas.FechaFin=this.datepipe.transform(this.dateRange.value.end,"yyyy-MM-dd"),this.contabilidad.getComisiones(this.fechas).subscribe(t=>{t.error||(this.backupPersonas=t.personas,this.filtrarPersona(),this.loading=!1)}))}detalles(t){if(t.ver)return t.ver=!1,void setTimeout(()=>{this.hrs=[]},1e3);for(let o=0;o<this.personas.length;o++)this.personas[o].ver=!1;this.fechas.IdPersona=t.IdPersona,this.contabilidad.Comisiones(this.fechas).subscribe(o=>{o.error||(this.hrs=o.hrs,t.ver=!0)})}filtrarPersona(){const t=this.buscar.toLocaleLowerCase();let o;this.personas=this.backupPersonas,this.personas=this.backupPersonas.filter(i=>(o="",["Nombre_Colaborador"].forEach(s=>{o+=i[s]+""}),!!o.toLocaleLowerCase().includes(t)))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.z),e.Y36(p.uU),e.Y36(m.i))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-comisiones"]],decls:36,vars:12,consts:[[1,"page-container",3,"ngClass"],[1,"main-content"],[1,"card"],[1,"row","mb-5"],[1,"col-md-3"],["appearance","legacy",2,"width","100%"],[3,"rangePicker","formGroup"],["matStartDate","","formControlName","start","placeholder","Start Date"],["matEndDate","","formControlName","end","placeholder","End Date",3,"dateChange"],["matSuffix","",3,"for"],["picker",""],["style","width: 100%;",4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],["for","",4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],[2,"width","100%"],["matInput","","type","text","placeholder","Buscar asesor",3,"ngModel","ngModelChange","keyup"],[3,"ngClass","click"],["scope","row"],["colspan","5",2,"padding","0 !important"],[1,"detalles",3,"ngClass"],[1,"table"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[4,"ngIf"],[1,"fw-bold"],["for",""]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"mat-form-field",5),e.TgZ(6,"mat-label"),e._uU(7,"Escoge un rango"),e.qZA(),e.TgZ(8,"mat-date-range-input",6),e._UZ(9,"input",7),e.TgZ(10,"input",8),e.NdJ("dateChange",function(){return o.dateRangeChange()}),e.qZA(),e.qZA(),e._UZ(11,"mat-datepicker-toggle",9),e._UZ(12,"mat-date-range-picker",null,10),e.qZA(),e.qZA(),e.TgZ(14,"div",4),e.YNc(15,k,2,1,"mat-form-field",11),e.qZA(),e.qZA(),e.TgZ(16,"div",12),e.TgZ(17,"table",13),e.TgZ(18,"thead"),e.TgZ(19,"tr"),e.TgZ(20,"th",14),e._uU(21,"#"),e.qZA(),e.TgZ(22,"th",14),e._uU(23,"Colaborador"),e.qZA(),e.TgZ(24,"th",14),e._uU(25,"Nivel"),e.qZA(),e.TgZ(26,"th",14),e._uU(27,"Volumen Venta"),e.qZA(),e.TgZ(28,"th",14),e._uU(29,"Comisi\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"tbody"),e.YNc(31,D,34,15,"ng-container",15),e.qZA(),e.qZA(),e.qZA(),e.YNc(32,j,2,0,"label",16),e.YNc(33,V,4,0,"div",17),e.YNc(34,G,2,0,"label",16),e.qZA(),e.qZA(),e._UZ(35,"app-footer"),e.qZA()),2&t){const i=e.MAs(13);e.Q6J("ngClass",e.WLB(9,W,o.app.sidebarState,!o.app.sidebarState)),e.xp6(8),e.Q6J("rangePicker",i)("formGroup",o.dateRange),e.xp6(3),e.Q6J("for",i),e.xp6(4),e.Q6J("ngIf",0!=o.backupPersonas.length),e.xp6(16),e.Q6J("ngForOf",o.personas),e.xp6(1),e.Q6J("ngIf",0==o.personas.length&&0==o.busqueda&&!o.loading),e.xp6(1),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",0==o.personas.length&&o.busqueda>0&&!o.loading)}},directives:[p.mk,q.KE,q.hX,h.wx,c.JL,c.sg,h.zY,c.Fj,c.JJ,c.u,h.By,h.nW,q.R9,h._g,p.O5,P.Nt,c.On,p.sg,C.c],styles:[".img-cons[_ngcontent-%COMP%]{width:43%}.main-content[_ngcontent-%COMP%]{text-align:center}.resaltar[_ngcontent-%COMP%]{background-color:#101c64;color:#fff!important}.table[_ngcontent-%COMP%]{cursor:pointer}.abierto[_ngcontent-%COMP%]{max-height:500px;transition:max-height .5s ease-in}.cerrado[_ngcontent-%COMP%]{max-height:0;transition:max-height .5s ease-out;overflow:hidden;padding:0!important}.detalles[_ngcontent-%COMP%]{width:100%}"]}),n})();var b=l(6878),K=l(5226),Z=l.n(K);function ee(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"button",67),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw().verRecibo(i.Img_Comprobante)}),e._UZ(13,"i",29),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.Nombre),e.xp6(2),e.Oqu(t.Desarrollo),e.xp6(2),e.Oqu(t.Lote),e.xp6(2),e.Oqu(t.FechaPago),e.xp6(2),e.Oqu(t.Concepto)}}function te(n,a){if(1&n&&(e.TgZ(0,"tbody"),e.YNc(1,ee,14,5,"tr",58),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",1==t.IdStatus)}}function oe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"button",68),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw().ObtenerHr(i)}),e._UZ(13,"i",69),e._uU(14,"Detalles"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.Nombre),e.xp6(2),e.Oqu(t.Desarrollo),e.xp6(2),e.Oqu(t.Lote),e.xp6(2),e.Oqu(t.FechaPago),e.xp6(2),e.Oqu(t.Concepto)}}function ne(n,a){if(1&n&&(e.TgZ(0,"tbody"),e.YNc(1,oe,15,5,"tr",58),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",2==t.IdStatus)}}function ae(n,a){if(1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.Nombre),e.xp6(2),e.Oqu(t.Desarrollo),e.xp6(2),e.Oqu(t.Lote),e.xp6(2),e.Oqu(t.FechaPago),e.xp6(2),e.Oqu(t.Concepto)}}function ie(n,a){if(1&n&&(e.TgZ(0,"tbody"),e.YNc(1,ae,11,5,"tr",58),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",3==t.IdStatus)}}function se(n,a){if(1&n&&(e.TgZ(0,"option",70),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.IdPersona),e.xp6(1),e.hij(" ",t.Nombre," ")}}function re(n,a){if(1&n&&(e.TgZ(0,"option",70),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.IdHR),e.xp6(1),e.AsE(" ",t.Desarrollo," Lote - ",t.Lote," ")}}function le(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"label"),e._uU(2,"Numero de registros"),e.qZA(),e.TgZ(3,"input",59),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().rep=i}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.rep)}}function ce(n,a){1&n&&e._UZ(0,"div",71)}function ge(n,a){1&n&&(e.TgZ(0,"label",72),e._uU(1,"s"),e.qZA())}const de=function(n,a){return{sidebar_is_full:n,sidebar_is_small:a}},pe=function(n){return{disabled:n}};let ue=(()=>{class n{constructor(t,o,i,s,r){this.app=t,this.auth=o,this.controlcalidad=i,this.contabilidad=s,this.toast=r,this.referencia=null,this.monto=null,this.fch=null,this.Pago=[],this.registros=[],this.HR={},this.pago=null,this.HRStatus1=null,this.HRStatus2=null,this.HRStatus3=null,this.personas=[],this.IdPersonaa=null,this.IdHR=null,this.Lotes=[],this.Concepto=null,this.rep=1,this.montopagos=null,this.comprobante=null,this.tipopago=null}ngOnInit(){this.usuario=this.auth.user.Nombre,this.controlcalidad.getPagosCobranza().subscribe(t=>{!0!==t.error&&(this.registros=t,this.HR=this.registros[0],console.log(this.registros))}),this.usuariopagos=this.auth.user.Nombre,this.controlcalidad.getInversionistas().subscribe(t=>{this.personas=t,console.log(this.personas)}),this.controlcalidad.getTipoPago().subscribe(t=>{!0!==t.error&&(this.TipoPago=t,console.log(this.TipoPago))})}ObtenerHr(t){console.log(t),this.HR=t}RegistrarPago(){this.controlcalidad.registrarPago({IdHR:this.HR.IdHR,IdTipoPago:this.pago,Referencia:this.referencia,Importe:this.monto,IdStatus:1,FechaRegistro:(new Date).toISOString().slice(0,19).replace("T"," "),FechaPago:this.fch,Usr:this.usuario}).subscribe(t=>{!0!==t.error&&(console.log(t),1==t.insert?(Z().fire("\xa1Pago registrado!","El pago se ha registrado con \xe9xito","success"),this.Vaciar()):Z().fire("\xa1El pago no fue registrado!","Ocurri\xf3 un error, intente nuevamente","error"))})}Vaciar(){this.pago=null,this.referencia=null,this.fch=null,this.monto=null}registrarPago(t){console.log(t),this.controlcalidad.verificarPago({IdPago:t.IdPago,IdStatus:1,IdHR:t.IdHR}).subscribe(i=>{console.log(i),1===i.updated?(Z().fire({title:"Pago Verificado",icon:"success",showConfirmButton:!1,timer:1500}),$(".modal").removeClass("show"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),$(".modal.fade").css("display","none")):Z().fire({title:"Ocurrio algo, Intente mas tarde",icon:"error",showConfirmButton:!1,timer:1500})})}rechazarPago(t){console.log(t),this.controlcalidad.verificarPago({IdPago:t.IdPago,IdStatus:3}).subscribe(i=>{console.log(i),1===i.updated?(Z().fire({title:"Pago Rechazado",icon:"success",showConfirmButton:!1,timer:1500}),$(".modal").removeClass("show"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),$(".modal.fade").css("display","none")):Z().fire({title:"Ocurrio algo, Intente mas tarde",icon:"error",showConfirmButton:!1,timer:1500})})}verRecibo(t){Z().fire({imageUrl:this.app.dominio+"asesores/Content/img/archivos_usuarios/COMP_PAGO/"+t,imageWidth:400,imageAlt:"El archivo no es una imagen",html:'<a href="'+this.app.dominio+"/asesores/Content/img/archivos_usuarios/COMP_PAGO/"+t+'" target="_blank">Ver en otra pesta\xf1a</a>'})}BuscarLotes(){console.log(this.IdPersonaa),this.controlcalidad.getLotesInversionista(this.IdPersonaa).subscribe(t=>{console.log(t),this.Lotes=t}),this.IdHR=null}concepto(){4!=this.Concepto&&(this.rep=1)}RegistrarPagos(){if(null!=this.Concepto&&null!=this.montopagos&&null!=this.IdHR&&null!=this.IdPersonaa&&null!=this.rep&&null!=this.comprobante&&null!=this.fechapago){this.insertados=0;for(let t=0;t<this.rep;t++)this.controlcalidad.registrarPago({IdHR:this.IdHR,IdTipoPago:this.tipopago,Referencia:this.text,Importe:this.montopagos,IdStatus:1,FechaRegistro:(new Date).toISOString().slice(0,19).replace("T"," "),FechaPago:this.fechapago,Usr:this.usuariopagos,ComprobantePago:this.comprobante,IdConcepto:this.Concepto}).subscribe(o=>{!0!==o.error?(console.log(o),1==o.insert&&(this.insertados++,this.toast.success("","Se ha registrado el pago correctamente"))):this.toast.error("","Ocurrio un error interno, intenta nuevamente")}),console.log(this.insertados);this.VaciarPagos()}else this.toast.error("","Todos los campos son requeridos",{timeOut:3e3})}subirImagen(t){console.log(t);let o=new FormData;o.append("upload_file",t[0]),o.append("IdPersona",this.IdPersonaa),o.append("subfolder","COMP_PAGO"),this.contabilidad.SubirComp(o).subscribe(i=>{'{"error":1,"message":"No se subio la imagen"}'==i?this.toast.warning("","Ocurrio un error al cargar la imagen, intenta nuevamente"):this.comprobante=i.filename})}Ref(t){this.text=t.target.options[t.target.options.selectedIndex].text}VaciarPagos(){this.Concepto=null,this.montopagos=null,this.IdHR=null,this.IdPersonaa=null,this.rep=1,this.comprobante=null}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.z),e.Y36(x.e),e.Y36(u.V),e.Y36(m.i),e.Y36(U._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-cobranza"]],decls:195,vars:33,consts:[[1,"page-container",3,"ngClass"],[1,"main-content"],[1,"card"],[1,"header-card"],[1,"card-body"],["id","pills-tab","role","tablist",1,"nav","nav-pills","mb-3"],["role","presentation",1,"nav-item"],["id","pagadosrec","data-bs-toggle","pill","data-bs-target","#pagados_rec","type","button","role","tab","aria-controls","pagados_rec","aria-selected","true",1,"nav-link","active"],["id","pendientesrec","data-bs-toggle","pill","data-bs-target","#pendientes_rec","type","button","role","tab","aria-controls","pendientes_rec","aria-selected","false",1,"nav-link"],["id","pills-contact-tab","data-bs-toggle","pill","data-bs-target","#pills-contact","type","button","role","tab","aria-controls","pills-contact","aria-selected","false",1,"nav-link"],["id","registrarrec","data-bs-toggle","pill","data-bs-target","#registrar_rec","type","button","role","tab","aria-controls","registrar_rec","aria-selected","false","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"nav-link"],["id","pills-tabContent",1,"tab-content"],["id","pagados_rec","role","tabpanel","aria-labelledby","pagadosrec",1,"tab-pane","fade","show","active"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["id","pendientes_rec","role","tabpanel","aria-labelledby","pendientesrec",1,"tab-pane","fade"],["id","exampleModalToggle","aria-hidden","true","aria-labelledby","exampleModalToggleLabel","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalToggleLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"row"],[1,"col-md-6"],["data-bs-target","#exampleModalToggle2","data-bs-toggle","modal","data-bs-dismiss","modal",1,"btn","btn-img"],[1,"img-compago",3,"src","alt"],["data-bs-target","#exampleModalToggle2","data-bs-toggle","modal","data-bs-dismiss","modal",1,"btn","btn-outline-info"],[1,"far","fa-eye"],[1,"list-group"],[1,"list-group-item"],[1,"fz-4","fw600"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["id","exampleModalToggle2","aria-hidden","true","aria-labelledby","exampleModalToggleLabel2","tabindex","-1",1,"modal","fade"],["id","exampleModalToggleLabel2",1,"modal-title"],["data-bs-target","#exampleModalToggle","data-bs-toggle","modal","data-bs-dismiss","modal",1,"btn","btn-primary","btn-back"],[1,"fas","fa-sign-out-alt"],[1,"col-12"],["id","pills-contact","role","tabpanel","aria-labelledby","pills-contact-tab",1,"tab-pane","fade"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],["id","exampleModalLabel",1,"modal-title"],["id","datalistOptions",1,"form-control",3,"ngModel","ngModelChange","change"],["value","null","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["id","datalistOptions",1,"form-control",3,"ngModel","change","ngModelChange"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["id","datalistOptions",1,"form-control",3,"ngModel","ngModelChange"],["value","null","disabled",""],[4,"ngIf"],["type","number","min","1",1,"form-control",3,"ngModel","ngModelChange"],["type","date",1,"form-control",3,"ngModel","ngModelChange"],[1,"position-relative"],["type","file","name","imagen",1,"form-control",2,"display","inline",3,"ngClass","change"],["imagen",""],["data-bs-toggle","tooltip","data-bs-placement","bottom","title","Tooltip on bottom","class","position-absolute bloqueo",4,"ngIf"],["type","button","placeholder","Ingrese el monto",1,"btn","btn-primary",3,"click"],["for","",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["data-bs-toggle","modal","data-bs-target","#exampleModalToggle",1,"btn","btn-ico","btn-sm","btn-outline-primary",3,"click"],[1,"fas","fa-check-circle","me-2"],[3,"value"],["data-bs-toggle","tooltip","data-bs-placement","bottom","title","Tooltip on bottom",1,"position-absolute","bloqueo"],["for",""]],template:function(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h2"),e._uU(5,"Pagos"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"ul",5),e.TgZ(8,"li",6),e.TgZ(9,"button",7),e._uU(10,"Realizados"),e.qZA(),e.qZA(),e.TgZ(11,"li",6),e.TgZ(12,"button",8),e._uU(13,"Pendientes"),e.qZA(),e.qZA(),e.TgZ(14,"li",6),e.TgZ(15,"button",9),e._uU(16," Rechazados "),e.qZA(),e.qZA(),e.TgZ(17,"li",6),e.TgZ(18,"button",10),e._uU(19," Registrar pago "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",11),e.TgZ(21,"div",12),e.TgZ(22,"table",13),e.TgZ(23,"thead"),e.TgZ(24,"tr"),e.TgZ(25,"th",14),e._uU(26,"Inversionista"),e.qZA(),e.TgZ(27,"th",14),e._uU(28,"Desarrollo"),e.qZA(),e.TgZ(29,"th",14),e._uU(30,"Lote"),e.qZA(),e.TgZ(31,"th",14),e._uU(32,"Ultima fecha de pago"),e.qZA(),e.TgZ(33,"th",14),e._uU(34,"Concepto"),e.qZA(),e._UZ(35,"th",14),e.qZA(),e.qZA(),e.YNc(36,te,2,1,"tbody",15),e.qZA(),e.qZA(),e.TgZ(37,"div",16),e.TgZ(38,"table",13),e.TgZ(39,"thead"),e.TgZ(40,"tr"),e.TgZ(41,"th",14),e._uU(42,"Inversionista"),e.qZA(),e.TgZ(43,"th",14),e._uU(44,"Desarrollo"),e.qZA(),e.TgZ(45,"th",14),e._uU(46,"Lote"),e.qZA(),e.TgZ(47,"th",14),e._uU(48,"Ultima fecha de pago"),e.qZA(),e.TgZ(49,"th",14),e._uU(50,"Concepto"),e.qZA(),e._UZ(51,"th",14),e.qZA(),e.qZA(),e.YNc(52,ne,2,1,"tbody",15),e.qZA(),e.TgZ(53,"div",17),e.TgZ(54,"div",18),e.TgZ(55,"div",19),e.TgZ(56,"div",20),e.TgZ(57,"h5",21),e._uU(58),e.qZA(),e._UZ(59,"button",22),e.qZA(),e.TgZ(60,"div",23),e.TgZ(61,"div",24),e.TgZ(62,"div",25),e.TgZ(63,"button",26),e._UZ(64,"img",27),e.qZA(),e.TgZ(65,"button",28),e._UZ(66,"i",29),e.qZA(),e.qZA(),e.TgZ(67,"div",25),e.TgZ(68,"ul",30),e.TgZ(69,"li",31),e.TgZ(70,"h4",32),e._uU(71,"Desarrollo "),e.qZA(),e.TgZ(72,"p"),e._uU(73),e.qZA(),e.qZA(),e.TgZ(74,"li",31),e.TgZ(75,"h4",32),e._uU(76,"Lote "),e.qZA(),e.TgZ(77,"p"),e._uU(78),e.qZA(),e.qZA(),e.TgZ(79,"li",31),e.TgZ(80,"h4",32),e._uU(81,"Importe "),e.qZA(),e.TgZ(82,"p"),e._uU(83),e.qZA(),e.qZA(),e.TgZ(84,"li",31),e.TgZ(85,"h4",32),e._uU(86,"Concepto "),e.qZA(),e.TgZ(87,"p"),e._uU(88),e.qZA(),e.qZA(),e.TgZ(89,"li",31),e.TgZ(90,"h4",32),e._uU(91,"Fecha Pago "),e.qZA(),e.TgZ(92,"p"),e._uU(93),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(94,"div",33),e.TgZ(95,"button",34),e._uU(96,"Cerrar"),e.qZA(),e.TgZ(97,"button",35),e.NdJ("click",function(){return o.rechazarPago(o.HR)}),e._uU(98,"Rechazar"),e.qZA(),e.TgZ(99,"button",36),e.NdJ("click",function(){return o.registrarPago(o.HR)}),e._uU(100,"Aceptar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(101,"div",37),e.TgZ(102,"div",18),e.TgZ(103,"div",19),e.TgZ(104,"div",20),e.TgZ(105,"h5",38),e._uU(106,"Vista del comporbante de pago"),e.qZA(),e.TgZ(107,"button",39),e._UZ(108,"i",40),e.qZA(),e.qZA(),e.TgZ(109,"div",23),e.TgZ(110,"div",24),e.TgZ(111,"div",41),e._UZ(112,"img",27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(113,"div",42),e.TgZ(114,"table",13),e.TgZ(115,"thead"),e.TgZ(116,"tr"),e.TgZ(117,"th",14),e._uU(118,"Inversionista"),e.qZA(),e.TgZ(119,"th",14),e._uU(120,"Desarrollo"),e.qZA(),e.TgZ(121,"th",14),e._uU(122,"Lote"),e.qZA(),e.TgZ(123,"th",14),e._uU(124,"Ultima fecha de pago"),e.qZA(),e.TgZ(125,"th",14),e._uU(126,"Concepto"),e.qZA(),e.qZA(),e.qZA(),e.YNc(127,ie,2,1,"tbody",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(128,"app-footer"),e.qZA(),e.TgZ(129,"div",43),e.TgZ(130,"div",44),e.TgZ(131,"div",19),e.TgZ(132,"div",20),e.TgZ(133,"h5",45),e._uU(134,"Registrar pago"),e.qZA(),e._UZ(135,"button",22),e.qZA(),e.TgZ(136,"div",23),e.TgZ(137,"label"),e._uU(138,"Selecciona un inversionista"),e.qZA(),e.TgZ(139,"select",46),e.NdJ("ngModelChange",function(r){return o.IdPersonaa=r})("change",function(){return o.BuscarLotes()}),e.TgZ(140,"option",47),e._uU(141," Selecciona una opci\xf3n "),e.qZA(),e.YNc(142,se,2,2,"option",48),e.qZA(),e.TgZ(143,"label"),e._uU(144,"Selecciona un lote"),e.qZA(),e.TgZ(145,"select",46),e.NdJ("ngModelChange",function(r){return o.IdHR=r})("change",function(r){return o.Ref(r)}),e.TgZ(146,"option",47),e._uU(147," Selecciona una opci\xf3n "),e.qZA(),e.YNc(148,re,2,3,"option",48),e.qZA(),e.TgZ(149,"label"),e._uU(150,"Concepto"),e.qZA(),e.TgZ(151,"select",49),e.NdJ("change",function(){return o.concepto()})("ngModelChange",function(r){return o.Concepto=r}),e.TgZ(152,"option",47),e._uU(153," Selecciona una opci\xf3n "),e.qZA(),e.TgZ(154,"option",50),e._uU(155,"Enganche"),e.qZA(),e.TgZ(156,"option",51),e._uU(157,"Gasto Administrativo"),e.qZA(),e.TgZ(158,"option",52),e._uU(159,"Mensualidad"),e.qZA(),e.TgZ(160,"option",53),e._uU(161,"Pago Generico"),e.qZA(),e.TgZ(162,"option",54),e._uU(163,"Intereses"),e.qZA(),e.TgZ(164,"option",55),e._uU(165,"Pago de contado"),e.qZA(),e.qZA(),e.TgZ(166,"label"),e._uU(167,"Tipo de pago"),e.qZA(),e.TgZ(168,"select",56),e.NdJ("ngModelChange",function(r){return o.tipopago=r}),e.TgZ(169,"option",57),e._uU(170,"Selecciona una opci\xf3n"),e.qZA(),e.TgZ(171,"option",50),e._uU(172,"Transferencia"),e.qZA(),e.TgZ(173,"option",51),e._uU(174,"Cheque"),e.qZA(),e.TgZ(175,"option",52),e._uU(176,"Efectivo"),e.qZA(),e.qZA(),e.YNc(177,le,4,1,"div",58),e.TgZ(178,"label"),e._uU(179,"Monto"),e.qZA(),e.TgZ(180,"input",59),e.NdJ("ngModelChange",function(r){return o.montopagos=r}),e.qZA(),e.TgZ(181,"label"),e._uU(182,"Fecha pago"),e.qZA(),e.TgZ(183,"input",60),e.NdJ("ngModelChange",function(r){return o.fechapago=r}),e.qZA(),e.TgZ(184,"label"),e._uU(185,"Comprobante"),e.qZA(),e.TgZ(186,"div",61),e.TgZ(187,"input",62,63),e.NdJ("change",function(){e.CHM(i);const r=e.MAs(188);return o.subirImagen(r.files)}),e.qZA(),e._UZ(189,"br"),e.YNc(190,ce,1,0,"div",64),e.qZA(),e.qZA(),e.TgZ(191,"div",33),e.TgZ(192,"button",65),e.NdJ("click",function(){return o.RegistrarPagos()}),e._uU(193,"Registrar pago"),e.YNc(194,ge,2,0,"label",66),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.Q6J("ngClass",e.WLB(28,de,o.app.sidebarState,!o.app.sidebarState)),e.xp6(36),e.Q6J("ngForOf",o.registros),e.xp6(16),e.Q6J("ngForOf",o.registros),e.xp6(6),e.hij("Cliente: ",o.HR.Nombre,""),e.xp6(6),e.hYB("src","",o.app.dominio,"api/storage/comprobantes_pagos/",o.HR.Img_Comprobante,"",e.LSH),e.s9C("alt",o.HR.Img_Comprobante),e.xp6(9),e.Oqu(o.HR.Desarrollo),e.xp6(5),e.Oqu(o.HR.Lote),e.xp6(5),e.Oqu(o.HR.Importe),e.xp6(5),e.Oqu(o.HR.Concepto),e.xp6(5),e.Oqu(o.HR.FechaPago),e.xp6(19),e.hYB("src","",o.app.dominio,"api/storage/comprobantes_pagos/",o.HR.Img_Comprobante,"",e.LSH),e.s9C("alt",o.HR.Img_Comprobante),e.xp6(15),e.Q6J("ngForOf",o.registros),e.xp6(12),e.Q6J("ngModel",o.IdPersonaa),e.xp6(3),e.Q6J("ngForOf",o.personas),e.xp6(3),e.Q6J("ngModel",o.IdHR),e.xp6(3),e.Q6J("ngForOf",o.Lotes),e.xp6(3),e.Q6J("ngModel",o.Concepto),e.xp6(17),e.Q6J("ngModel",o.tipopago),e.xp6(9),e.Q6J("ngIf",4==o.Concepto),e.xp6(3),e.Q6J("ngModel",o.montopagos),e.xp6(3),e.Q6J("ngModel",o.fechapago),e.xp6(4),e.Q6J("ngClass",e.VKq(31,pe,!o.IdPersonaa)),e.xp6(3),e.Q6J("ngIf",!o.IdPersonaa),e.xp6(4),e.Q6J("ngIf",o.rep>1))},directives:[p.mk,p.sg,p.O5,C.c,c.EJ,c.JJ,c.On,c.YN,c.Kr,c.qQ,c.wV,c.Fj],styles:[".img-cons[_ngcontent-%COMP%]{width:43%}.main-content[_ngcontent-%COMP%]{text-align:center}.img-compago[_ngcontent-%COMP%]{width:100%}.list-group-item[_ngcontent-%COMP%]{border:none}.btn-img[_ngcontent-%COMP%]{width:100%}.btn-back[_ngcontent-%COMP%]{transform:rotate(180deg)}"]}),n})();var I=l(5239),_e=l(6533);function Ze(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",57),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().seleccionar(s)}),e.TgZ(2,"h6"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e.TgZ(5,"b"),e._uU(6,"Pagos registrados:"),e.qZA(),e._uU(7),e.qZA(),e.TgZ(8,"p"),e.TgZ(9,"b"),e._uU(10,"Fecha \xfaltimo pago registrado:"),e.qZA(),e._uU(11),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit;e.xp6(3),e.lnq(" ",t.Desarrollo," ",t.Fase," ",t.Lote," "),e.xp6(4),e.hij(" ",t.NPagos," "),e.xp6(4),e.hij(" ",t.LPago," ")}}function me(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",62),e.TgZ(1,"i",63),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw().verComp(i.Img_Comprobante)}),e.qZA(),e.qZA()}}function he(n,a){1&n&&e._uU(0," No disponible ")}function be(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr"),e.TgZ(2,"td"),e.TgZ(3,"input",58),e.NdJ("ngModelChange",function(i){return e.CHM(t).$implicit.seleccionado=i})("change",function(){const s=e.CHM(t).$implicit;return e.oxw().test(s)}),e.qZA(),e.qZA(),e.TgZ(4,"td",59),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().SeleccionarPago(s)}),e._uU(5),e.qZA(),e.TgZ(6,"td",59),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().SeleccionarPago(s)}),e._uU(7),e.qZA(),e.TgZ(8,"td",59),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().SeleccionarPago(s)}),e._uU(9),e.qZA(),e.TgZ(10,"td",59),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().SeleccionarPago(s)}),e._uU(11),e.qZA(),e.TgZ(12,"td"),e.YNc(13,me,2,0,"button",60),e.YNc(14,he,1,0,"ng-template",null,61,e.W1O),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit,o=e.MAs(15),i=e.oxw();e.xp6(3),e.Q6J("ngModel",t.seleccionado),e.xp6(2),e.Oqu(t.FechaPago),e.xp6(2),e.Oqu(t.Concepto),e.xp6(2),e.hij("$ ",i.humanizeNumber(t.Importe),""),e.xp6(2),e.Oqu(t.Estatus),e.xp6(2),e.Q6J("ngIf",t.Img_Comprobante)("ngIfElse",o)}}function fe(n,a){1&n&&(e.ynx(0),e._uU(1,"Editar"),e.BQk())}function Te(n,a){1&n&&(e.ynx(0),e._uU(1,"Agregar"),e.BQk())}function Ce(n,a){1&n&&(e.ynx(0),e._uU(1,"Actualizar"),e.BQk())}function Ae(n,a){1&n&&(e.ynx(0),e._uU(1,"Registrar"),e.BQk())}function qe(n,a){1&n&&e._UZ(0,"app-full-loader",64)}const ve=function(n,a){return{sidebar_is_full:n,sidebar_is_small:a}},xe=[{path:"comisiones",component:X,canActivate:[b.f],data:{grant:21}},{path:"nomina",component:F,canActivate:[b.f],data:{grant:22}},{path:"inversionistas",component:J,canActivate:[b.f],data:{grant:23}},{path:"cobranza",component:ue,canActivate:[b.f],data:{grant:18}},{path:"inversionistas/:id",component:(()=>{class n{constructor(t,o,i,s,r,f,v){this.app=t,this.route=o,this.contabilidad=i,this.router=s,this.controlcalidad=r,this.toast=f,this.datepipe=v,this.subiendo=!1,this.info={},this.loading={},this.lote={LPagos:[]},this.pago={},this.excel=[],this.cb_asign=!1,this.c=0}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.getLotes(),this.canvas=new bootstrap.Offcanvas(document.getElementById("LoteCanvas")),this.modal=new bootstrap.Modal(document.getElementById("PagoModal"),{keyboard:!1})}test(t){console.log(t)}checkAll(t){1==$("#allcb").is(":checked")?this.lote.LPagos.forEach(o=>o.seleccionado=!0):this.lote.LPagos.forEach(o=>o.seleccionado=!1)}getLotes(){this.contabilidad.lotes(this.id).subscribe(t=>{t.error||(this.info=t,console.log(this.info))})}seleccionar(t){t.Pagos||(t.Pagos="[]"),t.LPagos=JSON.parse(t.Pagos),this.lote=t,console.log(this.lote)}humanizeNumber(t){for(t=t.toString();;){var o=t.replace(/(\d)(\d{3})($|,|\.)/g,"$1,$2$3");if(t==o)break;t=o}return t}verComp(t){Z().fire({imageUrl:"https://fibraxinversiones.mx/asesores/Content/img/archivos_usuarios/COMP_PAGO/"+t,imageWidth:400,imageAlt:"El archivo no es una imagen",html:'<a href="'+this.app.dominio+"/asesores/Content/img/archivos_usuarios/COMP_PAGO/"+t+'" target="_blank">Ver en otra pesta\xf1a</a>'})}SeleccionarPago(t){this.pago=t,this.canvas.hide(),this.modal.show(),console.log(t)}Actualizar(){this.controlcalidad.registrarPago(this.pago).subscribe(t=>(t.record.Inserted&&this.toast.success("Informaci\xf3n del pago guardada"),t.record.Updated&&this.toast.success("Informaci\xf3n del pago actualizada"),this.modal.hide(),this.canvas.show(),t.record))}eliminar(){this.pago.IdStatus=0,this.Actualizar()}onFileChange(t){const o=t.target;if(1!==o.files.length)throw new Error("Cannot use multiple files");let i=o.files[0].name;if(i=i.split("."),i=i[i.length-1],"xlsx"!=i&&"xls"!=i&&"csv"!=i)return this.toast.error("Solo se admiten archivos excel para esta operaci\xf3n"),void(this.archivo=null);const s=new FileReader;s.readAsBinaryString(o.files[0]),s.onload=r=>{const v=I.read(r.target.result,{type:"binary"}),M=v.Sheets[v.SheetNames[0]];this.excel=I.utils.sheet_to_json(M,{raw:!1,header:M?0:1,dateNF:"dd/mm/yyyy"}),console.log(this.excel),this.excel.forEach(g=>{switch(g.IdHR=this.lote.IdHR,g.IdStatus=1,g.FechaPago=this.datepipe.transform(g.FechaPago,"yyyy-MM-dd"),g.Importe=Number(g.Importe.replace(/[^0-9.-]+/g,"")),g.Tipo_pago){case"Internet":g.IdTipoPago=1;break;case"Transferencia":g.IdTipoPago=2;break;case"Cheque":g.IdTipoPago=3;break;case"Efectivo":g.IdTipoPago=4}switch(g.Concepto){case"Concepto":g.IdConcepto=1;break;case"Enganche":g.IdConcepto=2;break;case"Gasto Administrativo":g.IdConcepto=3;break;case"Mensualidad":g.IdConcepto=4;break;case"Pago Gen\xe9rico":g.IdConcepto=5;break;case"Intereses":g.IdConcepto=6;break;case"Pago de contado":g.IdConcepto=7}}),this.archivo=null,this.subiendo=!0,setTimeout(()=>{this.contabilidad.InsertarExcelPagos(this.excel).subscribe(g=>{console.log(g),g.error?this.toast.error("Ocurri\xf3 un error, intenta nuevamente"):this.toast.success("Pagos registrados con \xe9xito"),this.subiendo=!1})},1500)}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.z),e.Y36(A.gz),e.Y36(m.i),e.Y36(A.F0),e.Y36(u.V),e.Y36(U._W),e.Y36(p.uU))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lotes"]],decls:117,vars:23,consts:[[1,"page-container",3,"ngClass"],[1,"main-content"],[1,"card"],[1,"grid"],[4,"ngFor","ngForOf"],["tabindex","-1","id","LoteCanvas","aria-labelledby","LoteCanvasLabel",1,"offcanvas","offcanvas-end"],[1,"offcanvas-header"],["id","LoteCanvasLabel"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","text-reset"],[1,"offcanvas-body"],[1,"d-flex","justify-content-between"],[1,"filtros"],[1,"acciones","d-flex","mb-2"],[1,"btn","btn-primary",3,"click"],[1,"position-relative"],[1,"btn","btn-success","ms-1"],["type","file",1,"archivo",3,"change"],[1,"table-responsive","vh-75"],[1,"table","table-hover"],[1,"sticky-top"],[1,"table-light"],["type","checkbox","id","allcb",1,"checkbox",3,"change"],[1,"d-flex","justify-content-end","mt-2"],[1,"btn","btn-success","me-2"],[1,"fas","fa-check"],[1,"btn","btn-warning","me-2"],[1,"fas","fa-ban"],[1,"btn","btn-danger"],[1,"fas","fa-trash"],["id","PagoModal","tabindex","-1","aria-labelledby","PagoModalLabel","aria-hidden","true","data-bs-backdrop","static","data-bs-keyboard","false",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","PagoModalLabel",1,"modal-title"],[4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["for","",1,"mb-1"],["type","date","name","","id","",1,"form-control",3,"ngModel","ngModelChange"],["for","",1,"mt-2"],["placeholder","Escribe el monto","type","number",1,"form-control",3,"ngModel","ngModelChange"],["for","",1,"mt-2","mb-1"],["name","","id","",1,"form-select",3,"ngModel","ngModelChange"],["disabled","",3,"value"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["disabled","","disabled","",3,"value"],["value","1"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["message","Cargando movimientos",4,"ngIf"],["data-bs-toggle","offcanvas","data-bs-target","#LoteCanvas",1,"card","inversion",3,"click"],["type","checkbox","id","cb",1,"checkbox",3,"ngModel","ngModelChange","change"],[3,"click"],["class","btn btn-primary",4,"ngIf","ngIfElse"],["nocomp",""],[1,"btn","btn-primary"],[1,"far","fa-eye",3,"click"],["message","Cargando movimientos"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h3"),e._uU(4),e.qZA(),e.TgZ(5,"div",3),e.YNc(6,Ze,12,5,"ng-container",4),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"h5",7),e._uU(10),e.qZA(),e._UZ(11,"button",8),e.qZA(),e.TgZ(12,"div",9),e.TgZ(13,"div",10),e._UZ(14,"div",11),e.TgZ(15,"div",12),e.TgZ(16,"button",13),e.NdJ("click",function(){return o.SeleccionarPago({IdHR:o.lote.IdHR})}),e._uU(17," Registrar pago "),e.qZA(),e.TgZ(18,"div",14),e.TgZ(19,"button",15),e._uU(20,"Subir excel"),e.qZA(),e.TgZ(21,"input",16),e.NdJ("change",function(s){return o.onFileChange(s)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",17),e.TgZ(23,"table",18),e.TgZ(24,"thead",19),e.TgZ(25,"tr",20),e.TgZ(26,"th"),e.TgZ(27,"input",21),e.NdJ("change",function(s){return o.checkAll(s)}),e.qZA(),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Fecha pago"),e.qZA(),e.TgZ(30,"th"),e._uU(31,"Concepto"),e.qZA(),e.TgZ(32,"th"),e._uU(33,"Monto"),e.qZA(),e.TgZ(34,"th"),e._uU(35,"Estatus"),e.qZA(),e.TgZ(36,"th"),e._uU(37,"Comprobante"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"tbody"),e.YNc(39,be,16,7,"ng-container",4),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",22),e.TgZ(41,"button",23),e._uU(42,"Aceptar "),e._UZ(43,"i",24),e.qZA(),e.TgZ(44,"button",25),e._uU(45,"Rechazar "),e._UZ(46,"i",26),e.qZA(),e.TgZ(47,"button",27),e._uU(48,"Eliminar "),e._UZ(49,"i",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"div",29),e.TgZ(51,"div",30),e.TgZ(52,"div",31),e.TgZ(53,"div",32),e.TgZ(54,"h5",33),e.YNc(55,fe,2,0,"ng-container",34),e.YNc(56,Te,2,0,"ng-container",34),e._uU(57," pago "),e.qZA(),e._UZ(58,"button",35),e.qZA(),e.TgZ(59,"div",36),e.TgZ(60,"label",37),e._uU(61,"Fecha pago"),e.qZA(),e.TgZ(62,"input",38),e.NdJ("ngModelChange",function(s){return o.pago.FechaPago=s}),e.qZA(),e.TgZ(63,"label",39),e._uU(64,"Importe"),e.qZA(),e.TgZ(65,"input",40),e.NdJ("ngModelChange",function(s){return o.pago.Importe=s}),e.qZA(),e.TgZ(66,"label",41),e._uU(67,"Concepto"),e.qZA(),e.TgZ(68,"select",42),e.NdJ("ngModelChange",function(s){return o.pago.IdConcepto=s}),e.TgZ(69,"option",43),e._uU(70,"Selecciona una opci\xf3n"),e.qZA(),e.TgZ(71,"option",44),e._uU(72,"Enganche"),e.qZA(),e.TgZ(73,"option",45),e._uU(74,"Gasto Administrativo"),e.qZA(),e.TgZ(75,"option",46),e._uU(76,"Mensualidad"),e.qZA(),e.TgZ(77,"option",47),e._uU(78,"Pago Generico"),e.qZA(),e.TgZ(79,"option",48),e._uU(80,"Intereses"),e.qZA(),e.TgZ(81,"option",49),e._uU(82,"Pago de contado"),e.qZA(),e.qZA(),e.TgZ(83,"label",41),e._uU(84,"Tipo de pago"),e.qZA(),e.TgZ(85,"select",42),e.NdJ("ngModelChange",function(s){return o.pago.IdTipoPago=s}),e.TgZ(86,"option",50),e._uU(87," Selecciona una opci\xf3n "),e.qZA(),e.TgZ(88,"option",51),e._uU(89,"Internet (STRIPE)"),e.qZA(),e.TgZ(90,"option",44),e._uU(91,"Transferencia"),e.qZA(),e.TgZ(92,"option",45),e._uU(93,"Cheque"),e.qZA(),e.TgZ(94,"option",46),e._uU(95,"Efectivo"),e.qZA(),e.qZA(),e.TgZ(96,"label",41),e._uU(97,"Estatus"),e.qZA(),e.TgZ(98,"select",42),e.NdJ("ngModelChange",function(s){return o.pago.IdStatus=s}),e.TgZ(99,"option",50),e._uU(100," Selecciona una opci\xf3n "),e.qZA(),e.TgZ(101,"option",51),e._uU(102,"Aceptado"),e.qZA(),e.TgZ(103,"option",44),e._uU(104,"Pendiente"),e.qZA(),e.TgZ(105,"option",45),e._uU(106,"Rechazado"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(107,"div",52),e.TgZ(108,"button",53),e._uU(109," Cancelar "),e.qZA(),e.TgZ(110,"button",54),e.NdJ("click",function(){return o.eliminar()}),e._uU(111,"Eliminar"),e.qZA(),e.TgZ(112,"button",55),e.NdJ("click",function(){return o.Actualizar()}),e.YNc(113,Ce,2,0,"ng-container",34),e.YNc(114,Ae,2,0,"ng-container",34),e._uU(115," pago "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(116,qe,1,0,"app-full-loader",56)),2&t&&(e.Q6J("ngClass",e.WLB(20,ve,o.app.sidebarState,!o.app.sidebarState)),e.xp6(4),e.Oqu(null==o.info.Persona?null:o.info.Persona.NombreCompleto),e.xp6(2),e.Q6J("ngForOf",o.info.Lotes),e.xp6(4),e.lnq(" Pagos ",o.lote.Desarrollo," ",o.lote.Fase," ",o.lote.Lote," "),e.xp6(29),e.Q6J("ngForOf",o.lote.LPagos),e.xp6(16),e.Q6J("ngIf",o.pago.IdPago),e.xp6(1),e.Q6J("ngIf",!o.pago.IdPago),e.xp6(6),e.Q6J("ngModel",o.pago.FechaPago),e.xp6(3),e.Q6J("ngModel",o.pago.Importe),e.xp6(3),e.Q6J("ngModel",o.pago.IdConcepto),e.xp6(1),e.Q6J("value",void 0),e.xp6(16),e.Q6J("ngModel",o.pago.IdTipoPago),e.xp6(1),e.Q6J("value",void 0),e.xp6(12),e.Q6J("ngModel",o.pago.IdStatus),e.xp6(1),e.Q6J("value",void 0),e.xp6(14),e.Q6J("ngIf",o.pago.IdPago),e.xp6(1),e.Q6J("ngIf",!o.pago.IdPago),e.xp6(2),e.Q6J("ngIf",o.subiendo))},directives:[p.mk,p.sg,c.Wl,c.JJ,c.On,p.O5,c.Fj,c.wV,c.EJ,c.YN,c.Kr,_e.R],styles:[".grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-template-rows:auto;grid-gap:1rem;gap:1rem}.inversion[_ngcontent-%COMP%]:hover{box-shadow:10px 10px 5px #aaa;transform:scale(1.02)}.inversion[_ngcontent-%COMP%]{transition:box-shadow .3s ease-in-out;cursor:pointer}.offcanvas-end[_ngcontent-%COMP%]{width:60%}.archivo[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:0;bottom:0;opacity:0;cursor:pointer}.table-responsive[_ngcontent-%COMP%]{max-height:760px;overflow:auto}.checkbox[_ngcontent-%COMP%]{height:1rem;width:1rem}.vh-75[_ngcontent-%COMP%]{height:75vh}"]}),n})(),canActivate:[b.f],data:{grant:18}}];let Pe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[A.Bz.forChild(xe)],A.Bz]}),n})();var Ie=l(508),Me=l(6154);let ye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,Pe,d.K,c.u5,c.UX,h.FA,q.lN,Ie.XK,P.c,Me.SharedModule]]}),n})()},6533:(y,T,l)=>{l.d(T,{R:()=>p});var d=l(9863);let p=(()=>{class e{constructor(){this.message=""}ngOnInit(){}}return e.\u0275fac=function(u){return new(u||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-full-loader"]],inputs:{message:"message"},decls:10,vars:1,consts:[[1,"load-container"],[1,"text-center"],["role","status",1,"spinner-border","fs-6",2,"width","6rem","height","6rem"],[1,"visually-hidden"],[1,"fs-3"]],template:function(u,m){1&u&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"span",3),d._uU(4,"Loading..."),d.qZA(),d.qZA(),d._UZ(5,"br"),d._UZ(6,"br"),d.TgZ(7,"i",4),d.TgZ(8,"strong"),d._uU(9),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&u&&(d.xp6(9),d.Oqu(m.message))},styles:[".load-container[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;background-color:#ffffff9e;z-index:100000;left:0;top:0;display:flex;justify-content:center;align-items:center}"]}),e})()}}]);